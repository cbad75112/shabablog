import{Q as Pe}from"./QTooltip-Vk5MiGOE.js";import{az as se,a7 as j,a4 as U,F as Ee,aa as _e,ai as te,r as Y,o as Se,b as Be,a3 as Re,a5 as O,f as E,al as Oe,am as ne,a6 as oe,a8 as le,af as Ne,an as Ae,a9 as Le,ah as De,ax as Ve,ac as We}from"./index-79czGQqK.js";import{Q as Ue}from"./QPage-DICk6VGO.js";import{u as ze}from"./use-quasar-dpwrVnSN.js";import"./position-engine-CuShm7NQ.js";var X={};(function p(h,M,T,b){var N=!!(h.Worker&&h.Blob&&h.Promise&&h.OffscreenCanvas&&h.OffscreenCanvasRenderingContext2D&&h.HTMLCanvasElement&&h.HTMLCanvasElement.prototype.transferControlToOffscreen&&h.URL&&h.URL.createObjectURL),F=typeof Path2D=="function"&&typeof DOMMatrix=="function",S=function(){if(!h.OffscreenCanvas)return!1;var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var r=a.transferToImageBitmap();try{e.createPattern(r,"no-repeat")}catch{return!1}return!0}();function A(){}function D(a){var e=M.exports.Promise,r=e!==void 0?e:h.Promise;return typeof r=="function"?new r(a):(a(A,A),null)}var L=function(a,e){return{transform:function(r){if(a)return r;if(e.has(r))return e.get(r);var n=new OffscreenCanvas(r.width,r.height),o=n.getContext("2d");return o.drawImage(r,0,0),e.set(r,n),n},clear:function(){e.clear()}}}(S,new Map),V=function(){var a=Math.floor(16.666666666666668),e,r,n={},o=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(l){var i=Math.random();return n[i]=requestAnimationFrame(function t(s){o===s||o+a-1<s?(o=s,delete n[i],l()):n[i]=requestAnimationFrame(t)}),i},r=function(l){n[l]&&cancelAnimationFrame(n[l])}):(e=function(l){return setTimeout(l,a)},r=function(l){return clearTimeout(l)}),{frame:e,cancel:r}}(),q=function(){var a,e,r={};function n(o){function l(i,t){o.postMessage({options:i||{},callback:t})}o.init=function(t){var s=t.transferControlToOffscreen();o.postMessage({canvas:s},[s])},o.fire=function(t,s,d){if(e)return l(t,null),e;var m=Math.random().toString(36).slice(2);return e=D(function(f){function v(g){g.data.callback===m&&(delete r[m],o.removeEventListener("message",v),e=null,L.clear(),d(),f())}o.addEventListener("message",v),l(t,m),r[m]=v.bind(null,{data:{callback:m}})}),e},o.reset=function(){o.postMessage({reset:!0});for(var t in r)r[t](),delete r[t]}}return function(){if(a)return a;if(!T&&N){var o=["var CONFETTI, SIZE = {}, module = {};","("+p.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([o])))}catch(l){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",l),null}n(a)}return a}}(),z={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function k(a,e){return e?e(a):a}function w(a){return a!=null}function u(a,e,r){return k(a&&w(a[e])?a[e]:z[e],r)}function B(a){return a<0?0:Math.floor(a)}function _(a,e){return Math.floor(Math.random()*(e-a))+a}function W(a){return parseInt(a,16)}function Q(a){return a.map(Z)}function Z(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:W(e.substring(0,2)),g:W(e.substring(2,4)),b:W(e.substring(4,6))}}function ce(a){var e=u(a,"origin",Object);return e.x=u(e,"x",Number),e.y=u(e,"y",Number),e}function ue(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function de(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function he(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function fe(a,e,r,n,o,l,i,t,s){a.save(),a.translate(e,r),a.rotate(l),a.scale(n,o),a.arc(0,0,1,i,t,s),a.restore()}function me(a){var e=a.angle*(Math.PI/180),r=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*r-Math.random()*r),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function ve(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var r=e.tick++/e.totalTicks,n=e.x+e.random*e.tiltCos,o=e.y+e.random*e.tiltSin,l=e.wobbleX+e.random*e.tiltCos,i=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-r)+")",a.beginPath(),F&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(ge(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(l-n)*.1,Math.abs(i-o)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var t=Math.PI/10*e.wobble,s=Math.abs(l-n)*.1,d=Math.abs(i-o)*.1,m=e.shape.bitmap.width*e.scalar,f=e.shape.bitmap.height*e.scalar,v=new DOMMatrix([Math.cos(t)*s,Math.sin(t)*s,-Math.sin(t)*d,Math.cos(t)*d,e.x,e.y]);v.multiplySelf(new DOMMatrix(e.shape.matrix));var g=a.createPattern(L.transform(e.shape.bitmap),"no-repeat");g.setTransform(v),a.globalAlpha=1-r,a.fillStyle=g,a.fillRect(e.x-m/2,e.y-f/2,m,f),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(l-n)*e.ovalScalar,Math.abs(i-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):fe(a,e.x,e.y,Math.abs(l-n)*e.ovalScalar,Math.abs(i-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var c=Math.PI/2*3,y=4*e.scalar,x=8*e.scalar,C=e.x,P=e.y,R=5,I=Math.PI/R;R--;)C=e.x+Math.cos(c)*x,P=e.y+Math.sin(c)*x,a.lineTo(C,P),c+=I,C=e.x+Math.cos(c)*y,P=e.y+Math.sin(c)*y,a.lineTo(C,P),c+=I;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(o)),a.lineTo(Math.floor(l),Math.floor(i)),a.lineTo(Math.floor(n),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function pe(a,e,r,n,o){var l=e.slice(),i=a.getContext("2d"),t,s,d=D(function(m){function f(){t=s=null,i.clearRect(0,0,n.width,n.height),L.clear(),o(),m()}function v(){T&&!(n.width===b.width&&n.height===b.height)&&(n.width=a.width=b.width,n.height=a.height=b.height),!n.width&&!n.height&&(r(a),n.width=a.width,n.height=a.height),i.clearRect(0,0,n.width,n.height),l=l.filter(function(g){return ve(i,g)}),l.length?t=V.frame(v):f()}t=V.frame(v),s=f});return{addFettis:function(m){return l=l.concat(m),d},canvas:a,promise:d,reset:function(){t&&V.cancel(t),s&&s()}}}function G(a,e){var r=!a,n=!!u(e||{},"resize"),o=!1,l=u(e,"disableForReducedMotion",Boolean),i=N&&!!u(e||{},"useWorker"),t=i?q():null,s=r?ue:de,d=a&&t?!!a.__confetti_initialized:!1,m=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,f;function v(c,y,x){for(var C=u(c,"particleCount",B),P=u(c,"angle",Number),R=u(c,"spread",Number),I=u(c,"startVelocity",Number),we=u(c,"decay",Number),be=u(c,"gravity",Number),xe=u(c,"drift",Number),K=u(c,"colors",Q),Ce=u(c,"ticks",Number),ee=u(c,"shapes"),Fe=u(c,"scalar"),Ie=!!u(c,"flat"),ae=ce(c),re=C,H=[],Te=a.width*ae.x,ke=a.height*ae.y;re--;)H.push(me({x:Te,y:ke,angle:P,spread:R,startVelocity:I,color:K[re%K.length],shape:ee[_(0,ee.length)],ticks:Ce,decay:we,gravity:be,drift:xe,scalar:Fe,flat:Ie}));return f?f.addFettis(H):(f=pe(a,H,s,y,x),f.promise)}function g(c){var y=l||u(c,"disableForReducedMotion",Boolean),x=u(c,"zIndex",Number);if(y&&m)return D(function(I){I()});r&&f?a=f.canvas:r&&!a&&(a=he(x),document.body.appendChild(a)),n&&!d&&s(a);var C={width:a.width,height:a.height};t&&!d&&t.init(a),d=!0,t&&(a.__confetti_initialized=!0);function P(){if(t){var I={getBoundingClientRect:function(){if(!r)return a.getBoundingClientRect()}};s(I),t.postMessage({resize:{width:I.width,height:I.height}});return}C.width=C.height=null}function R(){f=null,n&&(o=!1,h.removeEventListener("resize",P)),r&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,d=!1)}return n&&!o&&(o=!0,h.addEventListener("resize",P,!1)),t?t.fire(c,C,R):v(c,C,R)}return g.reset=function(){t&&t.reset(),f&&f.reset()},g}var $;function J(){return $||($=G(null,{useWorker:!0,resize:!0})),$}function ge(a,e,r,n,o,l,i){var t=new Path2D(a),s=new Path2D;s.addPath(t,new DOMMatrix(e));var d=new Path2D;return d.addPath(s,new DOMMatrix([Math.cos(i)*o,Math.sin(i)*o,-Math.sin(i)*l,Math.cos(i)*l,r,n])),d}function Me(a){if(!F)throw new Error("path confetti are not supported in this browser");var e,r;typeof a=="string"?e=a:(e=a.path,r=a.matrix);var n=new Path2D(e),o=document.createElement("canvas"),l=o.getContext("2d");if(!r){for(var i=1e3,t=i,s=i,d=0,m=0,f,v,g=0;g<i;g+=2)for(var c=0;c<i;c+=2)l.isPointInPath(n,g,c,"nonzero")&&(t=Math.min(t,g),s=Math.min(s,c),d=Math.max(d,g),m=Math.max(m,c));f=d-t,v=m-s;var y=10,x=Math.min(y/f,y/v);r=[x,0,0,x,-Math.round(f/2+t)*x,-Math.round(v/2+s)*x]}return{type:"path",path:e,matrix:r}}function ye(a){var e,r=1,n="#000000",o='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,r="scalar"in a?a.scalar:r,o="fontFamily"in a?a.fontFamily:o,n="color"in a?a.color:n);var l=10*r,i=""+l+"px "+o,t=new OffscreenCanvas(l,l),s=t.getContext("2d");s.font=i;var d=s.measureText(e),m=Math.ceil(d.actualBoundingBoxRight+d.actualBoundingBoxLeft),f=Math.ceil(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent),v=2,g=d.actualBoundingBoxLeft+v,c=d.actualBoundingBoxAscent+v;m+=v+v,f+=v+v,t=new OffscreenCanvas(m,f),s=t.getContext("2d"),s.font=i,s.fillStyle=n,s.fillText(e,g,c);var y=1/r;return{type:"bitmap",bitmap:t.transferToImageBitmap(),matrix:[y,0,0,y,-m*y/2,-f*y/2]}}M.exports=function(){return J().apply(this,arguments)},M.exports.reset=function(){J().reset()},M.exports.create=G,M.exports.shapeFromPath=Me,M.exports.shapeFromText=ye})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),X,!1);const je=X.exports;X.exports.create;const qe={name:"FireworkEffect",data(){return{particles:[],posX:0,posY:0,animationFrame:null}},methods:{explode(){this.particles=[];for(let p=0;p<50;p++){const h={x:150,y:150,color:Qe(),speedX:ie(-5,5),speedY:ie(-5,5),gravity:.1,alpha:1};this.particles.push(h)}this.animate()},animate(){this.animationFrame=requestAnimationFrame(this.animate),this.particles.forEach((p,h)=>{p.x+=p.speedX,p.y+=p.speedY,p.speedY+=p.gravity,p.alpha-=.01,p.alpha<=0&&this.particles.splice(h,1)}),this.particles.length===0&&cancelAnimationFrame(this.animationFrame)}},mounted(){this.posX=window.innerWidth/2-150,this.posY=window.innerHeight/2-150}};function Qe(){const p="0123456789ABCDEF";let h="#";for(let M=0;M<6;M++)h+=p[Math.floor(Math.random()*16)];return h}function ie(p,h){return Math.random()*(h-p)+p}function Ze(p,h,M,T,b,N){return U(),j("div",{class:"firework",style:te({top:b.posY+"px",left:b.posX+"px"})},[(U(!0),j(Ee,null,_e(b.particles,(F,S)=>(U(),j("div",{class:"dot",key:S,style:te({backgroundColor:F.color,top:F.y+"px",left:F.x+"px",opacity:F.alpha})},null,4))),128))],4)}const $e=se(qe,[["render",Ze],["__scopeId","data-v-300c45b6"]]),He={class:"text-h4 text-center text-bold"},Ye={class:"q-mt-lg"},Xe={key:"countdown",class:"countdown-text glow-text"},Ge={__name:"BlogPage",setup(p){const h=ze(),M=Y(localStorage.getItem("work-end-time")||""),T=Y("");let b=null,N=!1,F=!1,S=!1;const A=Y(null),D=()=>{localStorage.setItem("work-end-time",M.value)},L=(k,w="orange")=>{h.notify({message:k,color:w,icon:"alarm",position:"top",timeout:3e3})},V=()=>{for(let k=0;k<10;k++)je({particleCount:100,spread:70,origin:{y:Math.random()*.4+.3}});A.value?.explode()},q=()=>{A.value?.explode()},z=()=>{if(!M.value){T.value="";return}const[k,w]=M.value.split(":").map(Number),u=new Date,B=new Date;B.setHours(k,w,0,0),B<u&&B.setDate(B.getDate()+1);const _=Math.floor((B-u)/1e3);if(_<=0){T.value="🎉 下班啦！🎉",S||(V(),S=!0);return}const W=Math.floor(_/3600),Q=Math.floor(_%3600/60),Z=_%60;T.value=`剩下 ${W} 小時 ${Q} 分 ${Z} 秒`,_<=300&&!N&&(L("還有 5 分鐘就下班囉！","info"),N=!0),_<=60&&!F&&(L("最後 1 分鐘，準備關機 🔔","negative"),F=!0),S=!1};return Se(()=>{b=setInterval(z,1e3),z()}),Be(()=>{clearInterval(b)}),(k,w)=>(U(),Re(Ue,{class:"flex flex-center q-pa-xl firework-background"},{default:O(()=>[E(Oe,{class:"glow-card scale-up",flat:"",bordered:""},{default:O(()=>[E(ne,null,{default:O(()=>[oe("div",He,[w[2]||(w[2]=le(" ⏳ 下班倒數計時 ")),E(Ne,{onClick:q,class:"test-btn q-ml-sm",round:"",glossy:"",color:"currentColor",icon:"celebration"},{default:O(()=>[E(Pe,null,{default:O(()=>w[1]||(w[1]=[le("測試煙火")])),_:1,__:[1]})]),_:1})]),oe("div",Ye,[E(Ae,{filled:"",modelValue:M.value,"onUpdate:modelValue":[w[0]||(w[0]=u=>M.value=u),D],label:"設定下班時間",type:"time",dense:"",class:"glow-input text-h6",rules:[u=>!!u||"請選擇時間"]},null,8,["modelValue","rules"])])]),_:1}),E(Le),E(ne,{class:"text-center q-py-xl"},{default:O(()=>[E(De,{name:"flash"},{default:O(()=>[T.value?(U(),j("div",Xe,We(T.value),1)):Ve("",!0)]),_:1})]),_:1})]),_:1}),E($e,{ref_key:"fireworkEffect",ref:A},null,512)]),_:1}))}},ta=se(Ge,[["__scopeId","data-v-cc8c3e4d"]]);export{ta as default};
