import{c as I,r as i,o as oe,a3 as d,a4 as u,a5 as t,a6 as v,ai as k,f as a,ag as x,am as S,af as m,a7 as L,F as T,aa as K,a8 as g,ac as C,ao as h,a9 as se,ae as re,ab as ue,aA as E,al as F,an as D,ap as P,N as R,aJ as ne}from"./index-BXKJSB8A.js";import{a as ie,Q as M}from"./QSelect-Ce_Mg15Q.js";import{Q as de,a as U}from"./QItem-C4O6BBdn.js";import{Q as A}from"./QItemLabel-DQKc6nAf.js";import{Q as W}from"./QTooltip-Bbb6-_DI.js";import{Q as me}from"./QList-BRP4uB6V.js";import{Q as ce}from"./QPage-D2yVuX59.js";import{u as ve,C as j}from"./useAuthStore-CBs8n-2P.js";import{u as fe}from"./use-quasar-CfaGXbVF.js";import"./position-engine-DoNrORsO.js";import"./selection-DsqZ3YNi.js";import"./format-DyQxkAtJ.js";const pe={class:"row items-center q-mb-sm justify-between"},ge={key:0,class:"text-grey"},ye={class:"row q-mb-sm items-center"},be={key:0,class:"text-grey text-center q-mt-md"},ke={class:"text-h6"},z="work-links",G="work-link-categories",Ue={__name:"WorkLinksPage",setup(Ce){const V=ve(),f=fe(),O=I(()=>f.dark.isActive),n=i([]),r=i([]),y=i(!1),w=i(!1),_=i(!1),N=i(-1),s=i({title:"",url:"",category:""}),Q=i(""),b=i(null),p=i("");oe(()=>{const o=localStorage.getItem(z);if(o)try{n.value=JSON.parse(o)}catch(l){console.error("ÁÑ°Ê≥ïËß£Êûê workLinks Ë≥áÊñô:",l)}const e=localStorage.getItem(G);if(e)try{r.value=JSON.parse(e),r.value.includes("Ë≥áË®äÈÉ®")&&(b.value="Ë≥áË®äÈÉ®")}catch(l){console.error("ÁÑ°Ê≥ïËß£Êûê categories Ë≥áÊñô:",l)}});function q(){localStorage.setItem(z,JSON.stringify(n.value)),localStorage.setItem(G,JSON.stringify(r.value))}function H(){const o=p.value.trim();o&&(r.value.includes(o)?f.notify({type:"warning",message:"ÂàÜÈ°ûÂ∑≤Â≠òÂú®"}):(r.value.push(o),r.value.sort(),q(),p.value=""))}function $(){H(),w.value=!1}function X(){p.value=""}function Y(o){const e=r.value[o];if(n.value.some(c=>c.category===e)){f.notify({type:"negative",message:"Ë©≤ÂàÜÈ°ûÊúâÈÄ£Áµê‰ΩøÁî®‰∏≠ÔºåÁÑ°Ê≥ïÂà™Èô§"});return}r.value.splice(o,1),q()}function Z(){_.value=!1,s.value={title:"",url:"",category:""},y.value=!0}function ee(o){_.value=!0,N.value=o,s.value={...n.value[o]},y.value=!0}function le(){if(!s.value.title||!s.value.url){f.notify({type:"negative",message:"ÂêçÁ®±ËàáÁ∂≤ÂùÄÁÇ∫ÂøÖÂ°´Ê¨Ñ‰Ωç"});return}if(s.value.category&&!r.value.includes(s.value.category)){f.notify({type:"negative",message:"Ë´ãÈÅ∏ÊìáÊúâÊïàÁöÑÂàÜÈ°û"});return}_.value&&N.value!==-1?n.value[N.value]={...s.value}:n.value.push({...s.value}),q(),y.value=!1}function ae(o){f.dialog({title:"Á¢∫Ë™çÂà™Èô§",message:`ÊòØÂê¶Âà™Èô§„Äå${n.value[o].title}„ÄçÔºü`,cancel:!0,persistent:!0}).onOk(()=>{n.value.splice(o,1),q()})}const B=I(()=>{let o=n.value;if(Q.value.trim()){const e=Q.value.trim().toLowerCase();o=o.filter(l=>l.title.toLowerCase().includes(e)||l.url.toLowerCase().includes(e))}return b.value&&(o=o.filter(e=>e.category===b.value)),o.map(e=>({link:e,originalIndex:n.value.indexOf(e)}))}),te=I(()=>[{label:"ÂÖ®ÈÉ®",value:null},...r.value.map(o=>({label:o,value:o}))]);return(o,e)=>(u(),d(ce,{class:"q-pa-md"},{default:t(()=>[e[13]||(e[13]=v("div",{class:"text-h5 q-mb-md text-outline"},"üîó Â∑•‰ΩúÂ∏∏Áî®ÈÄ£Áµê",-1)),x(V).mode==="admin"?(u(),d(S,{key:0,flat:"",bordered:"",class:"q-pa-md q-mb-lg"},{default:t(()=>[v("div",pe,[e[9]||(e[9]=v("div",{class:"text-subtitle1"},"ÂàÜÈ°ûÁÆ°ÁêÜ",-1)),a(m,{icon:"add",color:"primary",dense:"",round:"",flat:"",onClick:e[0]||(e[0]=l=>w.value=!0),label:"Êñ∞Â¢ûÂàÜÈ°û",class:"q-ml-xs"})]),v("div",null,[(u(!0),L(T,null,K(r.value,(l,c)=>(u(),d(ie,{key:l,removable:"",onRemove:J=>Y(c),class:"q-mr-sm q-mb-sm",color:"primary","text-color":"white",dense:""},{default:t(()=>[g(C(l),1)]),_:2},1032,["onRemove"]))),128)),r.value.length===0?(u(),L("div",ge,"Â∞öÁÑ°ÂàÜÈ°ûÔºåË´ãÈªûÊìäÂè≥‰∏äÊñ∞Â¢ûÂàÜÈ°û„ÄÇ")):k("",!0)])]),_:1})):k("",!0),a(S,{flat:"",bordered:"",class:"q-pa-md q-mb-md"},{default:t(()=>[v("div",ye,[a(h,{modelValue:Q.value,"onUpdate:modelValue":e[1]||(e[1]=l=>Q.value=l),outlined:"",dense:"",placeholder:"ÊêúÂ∞ãÈÄ£ÁµêÂêçÁ®±ÊàñÁ∂≤ÂùÄ",class:"col",clearable:"","clear-icon":"close"},null,8,["modelValue"]),a(M,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=l=>b.value=l),options:te.value,label:"ÂàÜÈ°ûÁØ©ÈÅ∏",dense:"",outlined:"",class:"q-ml-sm",clearable:"","clear-icon":"close","emit-value":"","map-options":"",style:{"min-width":"150px"}},null,8,["modelValue","options"]),x(V).mode==="admin"?(u(),d(m,{key:0,icon:"add",label:"Êñ∞Â¢ûÈÄ£Áµê",color:"primary",onClick:Z,class:"q-ml-sm"})):k("",!0)]),a(se),B.value.length===0?(u(),L("div",be," Â∞öÁÑ°‰ªª‰ΩïÁ¨¶ÂêàÊ¢ù‰ª∂ÁöÑÈÄ£ÁµêÔºåË´ãÈªûÈÅ∏„ÄåÊñ∞Â¢ûÈÄ£Áµê„ÄçÈñãÂßãÂª∫Á´ã„ÄÇ ")):(u(),d(me,{key:1,class:"q-mt-md"},{default:t(()=>[(u(!0),L(T,null,K(B.value,({link:l,originalIndex:c})=>(u(),d(de,{key:c,tag:"a",href:l.url,target:"_blank",class:re(["rounded-borders shadow-1 q-mb-sm",O.value?"bg-grey-9 text-white":"bg-white text-black"])},{default:t(()=>[a(U,{avatar:""},{default:t(()=>[a(ue,{name:"link",color:"primary"})]),_:1}),a(U,null,{default:t(()=>[a(A,{class:"text-bold"},{default:t(()=>[g(C(l.title),1)]),_:2},1024),a(A,{caption:""},{default:t(()=>[g(C(l.url),1)]),_:2},1024),a(A,{caption:"",class:"text-grey-6"},{default:t(()=>[g("ÂàÜÈ°ûÔºö"+C(l.category||"ÁÑ°"),1)]),_:2},1024)]),_:2},1024),a(U,{side:""},{default:t(()=>[x(V).mode==="admin"?(u(),d(m,{key:0,flat:"",round:"",dense:"",icon:"edit",onClick:E(J=>ee(c),["stop","prevent"]),color:O.value?"amber":"primary"},{default:t(()=>[a(W,null,{default:t(()=>e[10]||(e[10]=[g("Á∑®ËºØ")])),_:1,__:[10]})]),_:2},1032,["onClick","color"])):k("",!0),x(V).mode==="admin"?(u(),d(m,{key:1,flat:"",round:"",dense:"",icon:"delete",color:"negative",onClick:E(J=>ae(c),["stop","prevent"])},{default:t(()=>[a(W,null,{default:t(()=>e[11]||(e[11]=[g("Âà™Èô§")])),_:1,__:[11]})]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1032,["href","class"]))),128))]),_:1}))]),_:1}),a(F,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=l=>y.value=l),persistent:""},{default:t(()=>[a(S,{style:{"min-width":"400px"}},{default:t(()=>[a(D,null,{default:t(()=>[v("div",ke,C(_.value?"Á∑®ËºØÈÄ£Áµê":"Êñ∞Â¢ûÈÄ£Áµê"),1)]),_:1}),a(D,null,{default:t(()=>[a(h,{modelValue:s.value.title,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.title=l),label:"ÂêçÁ®±",filled:"",dense:""},null,8,["modelValue"]),a(h,{modelValue:s.value.url,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.url=l),label:"Á∂≤ÂùÄ",filled:"",dense:"",class:"q-mt-sm"},null,8,["modelValue"]),a(M,{modelValue:s.value.category,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.category=l),options:r.value,label:"ÂàÜÈ°û",filled:"",dense:"",class:"q-mt-sm",clearable:"","clear-icon":"close","emit-value":"","map-options":""},null,8,["modelValue","options"])]),_:1}),a(P,{align:"right"},{default:t(()=>[R(a(m,{flat:"",label:"ÂèñÊ∂à",color:"grey"},null,512),[[j]]),a(m,{flat:"",label:"ÂÑ≤Â≠ò",color:"primary",onClick:le})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(F,{modelValue:w.value,"onUpdate:modelValue":e[8]||(e[8]=l=>w.value=l),persistent:""},{default:t(()=>[a(S,{style:{"min-width":"300px"}},{default:t(()=>[a(D,null,{default:t(()=>e[12]||(e[12]=[v("div",{class:"text-h6"},"Êñ∞Â¢ûÂàÜÈ°û",-1)])),_:1,__:[12]}),a(D,null,{default:t(()=>[a(h,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=l=>p.value=l),label:"ÂàÜÈ°ûÂêçÁ®±",autofocus:"",dense:"",clearable:"","clear-icon":"close",onKeyup:ne($,["enter"])},null,8,["modelValue"])]),_:1}),a(P,{align:"right"},{default:t(()=>[R(a(m,{flat:"",label:"ÂèñÊ∂à",color:"grey",onClick:X},null,512),[[j]]),a(m,{flat:"",label:"Êñ∞Â¢û",color:"primary",disable:!p.value.trim(),onClick:$},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1,__:[13]}))}};export{Ue as default};
