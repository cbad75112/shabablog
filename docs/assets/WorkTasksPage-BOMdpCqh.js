import{c as p,b6 as qt,b7 as Ht,b8 as ua,A as Ot,C as sa,aX as ia,g as $t,E as da,b9 as ca,r as $,ba as va,w as ve,n as Mt,h as b,ah as ye,P as fa,bb as ma,af as T,b1 as ha,ak as et,az as ga,o as ya,a3 as Se,a4 as Z,a5 as V,a6 as ne,f as D,a7 as X,a8 as ie,ab as G,al as Pe,am as De,an as Me,F as Ze,aa as Le,N as Re,ay as Da,ae as bt,ax as Ma,ac as ke,aI as pt,ad as ba,ag as pa,ao as wt,bc as wa}from"./index-79czGQqK.js";import{Q as Ya,a as Ve}from"./QSelect-BHD0wZau.js";import{Q as xa,a as Je}from"./QItem-BsdmP0ml.js";import{p as S,c as _a,Q as We}from"./format-BmYgTvwK.js";import{Q as Ca}from"./QExpansionItem-XVsIRidI.js";import{Q as Sa}from"./QList-C0fPBIGY.js";import{u as ka}from"./use-render-cache-DLxPkVnQ.js";import{e as Va,c as qa}from"./position-engine-CuShm7NQ.js";import{Q as Ha}from"./QPage-DICk6VGO.js";import{C as Yt}from"./ClosePopup-67uXvrwW.js";import{u as Oa}from"./use-quasar-dpwrVnSN.js";import"./QChip-aG0DaxwM.js";const te=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function $a(e,n,u){return Object.prototype.toString.call(e)==="[object Date]"&&(u=e.getDate(),n=e.getMonth()+1,e=e.getFullYear()),ja(at(e,n,u))}function xt(e,n,u){return It(Fa(e,n,u))}function Ta(e){return Ia(e)===0}function He(e,n){return n<=6?31:n<=11||Ta(e)?30:29}function Ia(e){const n=te.length;let u=te[0],l,r,s,y,i;if(e<u||e>=te[n-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<n&&(l=te[i],r=l-u,!(e<l));i+=1)u=l;return y=e-u,r-y<6&&(y=y-r+O(r+4,33)*33),s=B(B(y+1,33)-1,4),s===-1&&(s=4),s}function Tt(e,n){const u=te.length,l=e+621;let r=-14,s=te[0],y,i,m,C,f;if(e<s||e>=te[u-1])throw new Error("Invalid Jalaali year "+e);for(f=1;f<u&&(y=te[f],i=y-s,!(e<y));f+=1)r=r+O(i,33)*8+O(B(i,33),4),s=y;C=e-s,r=r+O(C,33)*8+O(B(C,33)+3,4),B(i,33)===4&&i-C===4&&(r+=1);const w=O(l,4)-O((O(l,100)+1)*3,4)-150,F=20+r-w;return n||(i-C<6&&(C=C-i+O(i+4,33)*33),m=B(B(C+1,33)-1,4),m===-1&&(m=4)),{leap:m,gy:l,march:F}}function Fa(e,n,u){const l=Tt(e,!0);return at(l.gy,3,l.march)+(n-1)*31-O(n,7)*(n-7)+u-1}function ja(e){const n=It(e).gy;let u=n-621,l,r,s;const y=Tt(u,!1),i=at(n,3,y.march);if(s=e-i,s>=0){if(s<=185)return r=1+O(s,31),l=B(s,31)+1,{jy:u,jm:r,jd:l};s-=186}else u-=1,s+=179,y.leap===1&&(s+=1);return r=7+O(s,30),l=B(s,30)+1,{jy:u,jm:r,jd:l}}function at(e,n,u){let l=O((e+O(n-8,6)+100100)*1461,4)+O(153*B(n+9,12)+2,5)+u-34840408;return l=l-O(O(e+100100+O(n-8,6),100)*3,4)+752,l}function It(e){let n=4*e+139361631;n=n+O(O(4*e+183187720,146097)*3,4)*4-3908;const u=O(B(n,1461),4)*5+308,l=O(B(u,153),5)+1,r=B(O(u,153),12)+1;return{gy:O(n,1461)-100100+O(8-r,6),gm:r,gd:l}}function O(e,n){return~~(e/n)}function B(e,n){return e-~~(e/n)*n}const Qa=["gregorian","persian"],_t={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Qa.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Na=["update:modelValue"];function K(e){return e.year+"/"+S(e.month)+"/"+S(e.day)}function Ea(e,n){const u=p(()=>e.disable!==!0&&e.readonly!==!0),l=p(()=>u.value===!0?0:-1),r=p(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function s(){return e.locale!==void 0?{...n.lang.date,...e.locale}:n.lang.date}function y(i){const m=new Date,C=i===!0?null:0;if(e.calendar==="persian"){const f=$a(m);return{year:f.jy,month:f.jm,day:f.jd}}return{year:m.getFullYear(),month:m.getMonth()+1,day:m.getDate(),hour:C,minute:C,second:C,millisecond:C}}return{editable:u,tabindex:l,headerClass:r,getLocale:s,getCurrentDate:y}}const Ft=864e5,Aa=36e5,tt=6e4,jt="YYYY-MM-DDTHH:mm:ss.SSSZ",za=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ba=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Xe={};function Ua(e,n){const u="("+n.days.join("|")+")",l=e+u;if(Xe[l]!==void 0)return Xe[l];const r="("+n.daysShort.join("|")+")",s="("+n.months.join("|")+")",y="("+n.monthsShort.join("|")+")",i={};let m=0;const C=e.replace(Ba,w=>{switch(m++,w){case"YY":return i.YY=m,"(-?\\d{1,2})";case"YYYY":return i.YYYY=m,"(-?\\d{1,4})";case"M":return i.M=m,"(\\d{1,2})";case"Mo":return i.M=m++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return i.M=m,"(\\d{2})";case"MMM":return i.MMM=m,y;case"MMMM":return i.MMMM=m,s;case"D":return i.D=m,"(\\d{1,2})";case"Do":return i.D=m++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=m,"(\\d{2})";case"H":return i.H=m,"(\\d{1,2})";case"HH":return i.H=m,"(\\d{2})";case"h":return i.h=m,"(\\d{1,2})";case"hh":return i.h=m,"(\\d{2})";case"m":return i.m=m,"(\\d{1,2})";case"mm":return i.m=m,"(\\d{2})";case"s":return i.s=m,"(\\d{1,2})";case"ss":return i.s=m,"(\\d{2})";case"S":return i.S=m,"(\\d{1})";case"SS":return i.S=m,"(\\d{2})";case"SSS":return i.S=m,"(\\d{3})";case"A":return i.A=m,"(AM|PM)";case"a":return i.a=m,"(am|pm)";case"aa":return i.aa=m,"(a\\.m\\.|p\\.m\\.)";case"ddd":return r;case"dddd":return u;case"Q":case"d":case"E":return"(\\d{1})";case"do":return m++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return m++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return m++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return i.Z=m,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=m,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=m,"(-?\\d+)";case"x":return i.x=m,"(-?\\d{4,})";default:return m--,w[0]==="["&&(w=w.substring(1,w.length-1)),w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),f={map:i,regex:new RegExp("^"+C)};return Xe[l]=f,f}function Qt(e,n){return e!==void 0?e:n!==void 0?n.date:ua.date}function Ct(e,n=""){const u=e>0?"-":"+",l=Math.abs(e),r=Math.floor(l/60),s=l%60;return u+S(r)+n+S(s)}function Pa(e,n,u){let l=e.getFullYear(),r=e.getMonth();const s=e.getDate();return n.year!==void 0&&(l+=u*n.year,delete n.year),n.month!==void 0&&(r+=u*n.month,delete n.month),e.setDate(1),e.setMonth(2),e.setFullYear(l),e.setMonth(r),e.setDate(Math.min(s,ot(e))),n.date!==void 0&&(e.setDate(e.getDate()+u*n.date),delete n.date),e}function Za(e,n,u){const l=n.year!==void 0?n.year:e[`get${u}FullYear`](),r=n.month!==void 0?n.month-1:e[`get${u}Month`](),s=new Date(l,r+1,0).getDate(),y=Math.min(s,n.date!==void 0?n.date:e[`get${u}Date`]());return e[`set${u}Date`](1),e[`set${u}Month`](2),e[`set${u}FullYear`](l),e[`set${u}Month`](r),e[`set${u}Date`](y),delete n.year,delete n.month,delete n.date,e}function nt(e,n,u){const l=Nt(n),r=new Date(e),s=l.year!==void 0||l.month!==void 0||l.date!==void 0?Pa(r,l,u):r;for(const y in l){const i=_a(y);s[`set${i}`](s[`get${i}`]()+u*l[y])}return s}function Nt(e){const n={...e};return e.years!==void 0&&(n.year=e.years,delete n.years),e.months!==void 0&&(n.month=e.months,delete n.months),e.days!==void 0&&(n.date=e.days,delete n.days),e.day!==void 0&&(n.date=e.day,delete n.day),e.hour!==void 0&&(n.hours=e.hour,delete n.hour),e.minute!==void 0&&(n.minutes=e.minute,delete n.minute),e.second!==void 0&&(n.seconds=e.second,delete n.second),e.millisecond!==void 0&&(n.milliseconds=e.millisecond,delete n.millisecond),n}function Et(e,n,u){const l=Nt(n),r=u===!0?"UTC":"",s=new Date(e),y=l.year!==void 0||l.month!==void 0||l.date!==void 0?Za(s,l,r):s;for(const i in l){const m=i.charAt(0).toUpperCase()+i.slice(1);y[`set${r}${m}`](l[i])}return y}function La(e,n,u){const l=At(e,n,u),r=new Date(l.year,l.month===null?null:l.month-1,l.day===null?1:l.day,l.hour,l.minute,l.second,l.millisecond),s=r.getTimezoneOffset();return l.timezoneOffset===null||l.timezoneOffset===s?r:nt(r,{minutes:l.timezoneOffset-s},1)}function At(e,n,u,l,r){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(r!==void 0&&Object.assign(s,r),e==null||e===""||typeof e!="string")return s;n===void 0&&(n=jt);const y=Qt(u,qt.props),i=y.months,m=y.monthsShort,{regex:C,map:f}=Ua(n,y),w=e.match(C);if(w===null)return s;let F="";if(f.X!==void 0||f.x!==void 0){const Q=parseInt(w[f.X!==void 0?f.X:f.x],10);if(isNaN(Q)===!0||Q<0)return s;const j=new Date(Q*(f.X!==void 0?1e3:1));s.year=j.getFullYear(),s.month=j.getMonth()+1,s.day=j.getDate(),s.hour=j.getHours(),s.minute=j.getMinutes(),s.second=j.getSeconds(),s.millisecond=j.getMilliseconds()}else{if(f.YYYY!==void 0)s.year=parseInt(w[f.YYYY],10);else if(f.YY!==void 0){const Q=parseInt(w[f.YY],10);s.year=Q<0?Q:2e3+Q}if(f.M!==void 0){if(s.month=parseInt(w[f.M],10),s.month<1||s.month>12)return s}else f.MMM!==void 0?s.month=m.indexOf(w[f.MMM])+1:f.MMMM!==void 0&&(s.month=i.indexOf(w[f.MMMM])+1);if(f.D!==void 0){if(s.day=parseInt(w[f.D],10),s.year===null||s.month===null||s.day<1)return s;const Q=l!=="persian"?new Date(s.year,s.month,0).getDate():He(s.year,s.month);if(s.day>Q)return s}f.H!==void 0?s.hour=parseInt(w[f.H],10)%24:f.h!==void 0&&(s.hour=parseInt(w[f.h],10)%12,(f.A&&w[f.A]==="PM"||f.a&&w[f.a]==="pm"||f.aa&&w[f.aa]==="p.m.")&&(s.hour+=12),s.hour=s.hour%24),f.m!==void 0&&(s.minute=parseInt(w[f.m],10)%60),f.s!==void 0&&(s.second=parseInt(w[f.s],10)%60),f.S!==void 0&&(s.millisecond=parseInt(w[f.S],10)*10**(3-w[f.S].length)),(f.Z!==void 0||f.ZZ!==void 0)&&(F=f.Z!==void 0?w[f.Z].replace(":",""):w[f.ZZ],s.timezoneOffset=(F[0]==="+"?-1:1)*(60*F.slice(1,3)+1*F.slice(3,5)))}return s.dateHash=S(s.year,6)+"/"+S(s.month)+"/"+S(s.day),s.timeHash=S(s.hour)+":"+S(s.minute)+":"+S(s.second)+F,s}function Ra(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Ja(e,n){return Et(new Date,e,n)}function Wa(e){const n=new Date(e).getDay();return n===0?7:n}function Oe(e){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);const u=new Date(n.getFullYear(),0,4);u.setDate(u.getDate()-(u.getDay()+6)%7+3);const l=n.getTimezoneOffset()-u.getTimezoneOffset();n.setHours(n.getHours()-l);const r=(n-u)/(Ft*7);return 1+Math.floor(r)}function Xa(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function Ge(e,n){const u=new Date(e);return n===!0?Xa(u):u.getTime()}function Ga(e,n,u,l={}){const r=Ge(n,l.onlyDate),s=Ge(u,l.onlyDate),y=Ge(e,l.onlyDate);return(y>r||l.inclusiveFrom===!0&&y===r)&&(y<s||l.inclusiveTo===!0&&y===s)}function Ka(e,n){return nt(e,n,1)}function en(e,n){return nt(e,n,-1)}function R(e,n,u){const l=new Date(e),r=`set${u===!0?"UTC":""}`;switch(n){case"year":case"years":l[`${r}Month`](0);case"month":case"months":l[`${r}Date`](1);case"day":case"days":case"date":l[`${r}Hours`](0);case"hour":case"hours":l[`${r}Minutes`](0);case"minute":case"minutes":l[`${r}Seconds`](0);case"second":case"seconds":l[`${r}Milliseconds`](0)}return l}function tn(e,n,u){const l=new Date(e),r=`set${u===!0?"UTC":""}`;switch(n){case"year":case"years":l[`${r}Month`](11);case"month":case"months":l[`${r}Date`](ot(l));case"day":case"days":case"date":l[`${r}Hours`](23);case"hour":case"hours":l[`${r}Minutes`](59);case"minute":case"minutes":l[`${r}Seconds`](59);case"second":case"seconds":l[`${r}Milliseconds`](999)}return l}function an(e){let n=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(u=>{n=Math.max(n,new Date(u))}),n}function nn(e){let n=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(u=>{n=Math.min(n,new Date(u))}),n}function qe(e,n,u){return(e.getTime()-e.getTimezoneOffset()*tt-(n.getTime()-n.getTimezoneOffset()*tt))/u}function lt(e,n,u="days"){const l=new Date(e),r=new Date(n);switch(u){case"years":case"year":return l.getFullYear()-r.getFullYear();case"months":case"month":return(l.getFullYear()-r.getFullYear())*12+l.getMonth()-r.getMonth();case"days":case"day":case"date":return qe(R(l,"day"),R(r,"day"),Ft);case"hours":case"hour":return qe(R(l,"hour"),R(r,"hour"),Aa);case"minutes":case"minute":return qe(R(l,"minute"),R(r,"minute"),tt);case"seconds":case"second":return qe(R(l,"second"),R(r,"second"),1e3)}}function $e(e){return lt(e,R(e,"year"),"days")+1}function ln(e){return Ht(e)===!0?"date":typeof e=="number"?"number":"string"}function on(e,n,u){const l=new Date(e);if(n){const r=new Date(n);if(l<r)return r}if(u){const r=new Date(u);if(l>r)return r}return l}function rn(e,n,u){const l=new Date(e),r=new Date(n);if(u===void 0)return l.getTime()===r.getTime();switch(u){case"second":case"seconds":if(l.getSeconds()!==r.getSeconds())return!1;case"minute":case"minutes":if(l.getMinutes()!==r.getMinutes())return!1;case"hour":case"hours":if(l.getHours()!==r.getHours())return!1;case"day":case"days":case"date":if(l.getDate()!==r.getDate())return!1;case"month":case"months":if(l.getMonth()!==r.getMonth())return!1;case"year":case"years":if(l.getFullYear()!==r.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${u}`)}return!0}function ot(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function de(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const St={YY(e,n,u){const l=this.YYYY(e,n,u)%100;return l>=0?S(l):"-"+S(Math.abs(l))},YYYY(e,n,u){return u??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return de(e.getMonth()+1)},MM(e){return S(e.getMonth()+1)},MMM(e,n){return n.monthsShort[e.getMonth()]},MMMM(e,n){return n.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return de(this.Q(e))},D(e){return e.getDate()},Do(e){return de(e.getDate())},DD(e){return S(e.getDate())},DDD(e){return $e(e)},DDDo(e){return de($e(e))},DDDD(e){return S($e(e),3)},d(e){return e.getDay()},do(e){return de(e.getDay())},dd(e,n){return n.days[e.getDay()].slice(0,2)},ddd(e,n){return n.daysShort[e.getDay()]},dddd(e,n){return n.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Oe(e)},wo(e){return de(Oe(e))},ww(e){return S(Oe(e))},H(e){return e.getHours()},HH(e){return S(e.getHours())},h(e){const n=e.getHours();return n===0?12:n>12?n%12:n},hh(e){return S(this.h(e))},m(e){return e.getMinutes()},mm(e){return S(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return S(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return S(Math.floor(e.getMilliseconds()/10))},SSS(e){return S(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,n,u,l){const r=l??e.getTimezoneOffset();return Ct(r,":")},ZZ(e,n,u,l){const r=l??e.getTimezoneOffset();return Ct(r)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function zt(e,n,u,l,r){if(e!==0&&!e||e===1/0||e===-1/0)return;const s=new Date(e);if(isNaN(s))return;n===void 0&&(n=jt);const y=Qt(u,qt.props);return n.replace(za,(i,m)=>i in St?St[i](s,y,l,r):m===void 0?i:m.split("\\]").join("]"))}function un(e){return Ht(e)===!0?new Date(e.getTime()):e}const kt={isValid:Ra,extractDate:La,buildDate:Ja,getDayOfWeek:Wa,getWeekOfYear:Oe,isBetweenDates:Ga,addToDate:Ka,subtractFromDate:en,adjustDate:Et,startOfDate:R,endOfDate:tn,getMaxDate:an,getMinDate:nn,getDateDiff:lt,getDayOfYear:$e,inferDateFormat:ln,getDateBetween:on,isSameDate:rn,daysInMonth:ot,formatDate:zt,clone:un},J=20,sn=["Calendar","Years","Months"],Vt=e=>sn.includes(e),Ke=e=>/^-?[\d]+\/[0-1]\d$/.test(e),ce=" — ";function ee(e){return e.year+"/"+S(e.month)}const dn=Ot({name:"QDate",props:{..._t,...ia,...sa,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{..._t.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ke},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ke},navigationMaxYearMonth:{type:String,validator:Ke},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Vt}},emits:[...Na,"rangeStart","rangeEnd","navigation"],setup(e,{slots:n,emit:u}){const{proxy:l}=$t(),{$q:r}=l,s=da(e,r),{getCache:y}=ka(),{tabindex:i,headerClass:m,getLocale:C,getCurrentDate:f}=Ea(e,r);let w;const F=ca(e),Q=ma(F),j=$(null),k=$(vt()),q=$(C()),be=p(()=>vt()),Te=p(()=>C()),U=p(()=>f()),M=$(ft(k.value,q.value)),N=$(e.defaultView),pe=p(()=>r.lang.rtl===!0?"right":"left"),le=$(pe.value),fe=$(pe.value),_=M.value.year,h=$(_-_%J-(_<0?J:0)),c=$(null),I=p(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(s.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),z=p(()=>e.color||"primary"),oe=p(()=>e.textColor||"white"),we=p(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Ie=p(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),L=p(()=>Ie.value.filter(t=>typeof t=="string").map(t=>Ee(t,k.value,q.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),re=p(()=>{const t=a=>Ee(a,k.value,q.value);return Ie.value.filter(a=>va(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),Ye=p(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=xt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Fe=p(()=>e.calendar==="persian"?K:(t,a,o)=>zt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?k.value:a,o===void 0?q.value:o,t.year,t.timezoneOffset)),me=p(()=>L.value.length+re.value.reduce((t,a)=>t+1+lt(Ye.value(a.to),Ye.value(a.from)),0)),rt=p(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(c.value!==null){const o=c.value.init,d=Ye.value(o);return q.value.daysShort[d.getDay()]+", "+q.value.monthsShort[o.month-1]+" "+o.day+ce+"?"}if(me.value===0)return ce;if(me.value>1)return`${me.value} ${q.value.pluralDay}`;const t=L.value[0],a=Ye.value(t);return isNaN(a.valueOf())===!0?ce:q.value.headerTitle!==void 0?q.value.headerTitle(a,t):q.value.daysShort[a.getDay()]+", "+q.value.monthsShort[t.month-1]+" "+t.day}),Bt=p(()=>L.value.concat(re.value.map(a=>a.from)).sort((a,o)=>a.year-o.year||a.month-o.month)[0]),Ut=p(()=>L.value.concat(re.value.map(a=>a.to)).sort((a,o)=>o.year-a.year||o.month-a.month)[0]),ut=p(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(me.value===0)return ce;if(me.value>1){const t=Bt.value,a=Ut.value,o=q.value.monthsShort;return o[t.month-1]+(t.year!==a.year?" "+t.year+ce+o[a.month-1]+" ":t.month!==a.month?ce+o[a.month-1]:"")+" "+a.year}return L.value[0].year}),xe=p(()=>{const t=[r.iconSet.datetime.arrowLeft,r.iconSet.datetime.arrowRight];return r.lang.rtl===!0?t.reverse():t}),st=p(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):q.value.firstDayOfWeek),Pt=p(()=>{const t=q.value.daysShort,a=st.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),W=p(()=>{const t=M.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():He(t.year,t.month)}),Zt=p(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),E=p(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),A=p(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),je=p(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return E.value!==null&&E.value.year>=M.value.year&&(t.year.prev=!1,E.value.year===M.value.year&&E.value.month>=M.value.month&&(t.month.prev=!1)),A.value!==null&&A.value.year<=M.value.year&&(t.year.next=!1,A.value.year===M.value.year&&A.value.month<=M.value.month&&(t.month.next=!1)),t}),_e=p(()=>{const t={};return L.value.forEach(a=>{const o=ee(a);t[o]===void 0&&(t[o]=[]),t[o].push(a.day)}),t}),it=p(()=>{const t={};return re.value.forEach(a=>{const o=ee(a.from),d=ee(a.to);if(t[o]===void 0&&(t[o]=[]),t[o].push({from:a.from.day,to:o===d?a.to.day:void 0,range:a}),o<d){let v;const{year:x,month:g}=a.from,Y=g<12?{year:x,month:g+1}:{year:x+1,month:1};for(;(v=ee(Y))<=d;)t[v]===void 0&&(t[v]=[]),t[v].push({from:void 0,to:v===d?a.to.day:void 0,range:a}),Y.month++,Y.month>12&&(Y.year++,Y.month=1)}}),t}),he=p(()=>{if(c.value===null)return;const{init:t,initHash:a,final:o,finalHash:d}=c.value,[v,x]=a<=d?[t,o]:[o,t],g=ee(v),Y=ee(x);if(g!==P.value&&Y!==P.value)return;const H={};return g===P.value?(H.from=v.day,H.includeFrom=!0):H.from=1,Y===P.value?(H.to=x.day,H.includeTo=!0):H.to=W.value,H}),P=p(()=>ee(M.value)),Lt=p(()=>{const t={};if(e.options===void 0){for(let o=1;o<=W.value;o++)t[o]=!0;return t}const a=typeof e.options=="function"?e.options:o=>e.options.includes(o);for(let o=1;o<=W.value;o++){const d=P.value+"/"+S(o);t[o]=a(d)}return t}),Rt=p(()=>{const t={};if(e.events===void 0)for(let a=1;a<=W.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:o=>e.events.includes(o);for(let o=1;o<=W.value;o++){const d=P.value+"/"+S(o);t[o]=a(d)===!0&&Zt.value(d)}}return t}),Jt=p(()=>{let t,a;const{year:o,month:d}=M.value;if(e.calendar!=="persian")t=new Date(o,d-1,1),a=new Date(o,d-1,0).getDate();else{const v=xt(o,d,1);t=new Date(v.gy,v.gm-1,v.gd);let x=d-1,g=o;x===0&&(x=12,g--),a=He(g,x)}return{days:t.getDay()-st.value-1,endDay:a}}),dt=p(()=>{const t=[],{days:a,endDay:o}=Jt.value,d=a<0?a+7:a;if(d<6)for(let g=o-d;g<=o;g++)t.push({i:g,fill:!0});const v=t.length;for(let g=1;g<=W.value;g++){const Y={i:g,event:Rt.value[g],classes:[]};Lt.value[g]===!0&&(Y.in=!0,Y.flat=!0),t.push(Y)}if(_e.value[P.value]!==void 0&&_e.value[P.value].forEach(g=>{const Y=v+g-1;Object.assign(t[Y],{selected:!0,unelevated:!0,flat:!1,color:z.value,textColor:oe.value})}),it.value[P.value]!==void 0&&it.value[P.value].forEach(g=>{if(g.from!==void 0){const Y=v+g.from-1,H=v+(g.to||W.value)-1;for(let ge=Y;ge<=H;ge++)Object.assign(t[ge],{range:g.range,unelevated:!0,color:z.value,textColor:oe.value});Object.assign(t[Y],{rangeFrom:!0,flat:!1}),g.to!==void 0&&Object.assign(t[H],{rangeTo:!0,flat:!1})}else if(g.to!==void 0){const Y=v+g.to-1;for(let H=v;H<=Y;H++)Object.assign(t[H],{range:g.range,unelevated:!0,color:z.value,textColor:oe.value});Object.assign(t[Y],{flat:!1,rangeTo:!0})}else{const Y=v+W.value-1;for(let H=v;H<=Y;H++)Object.assign(t[H],{range:g.range,unelevated:!0,color:z.value,textColor:oe.value})}}),he.value!==void 0){const g=v+he.value.from-1,Y=v+he.value.to-1;for(let H=g;H<=Y;H++)t[H].color=z.value,t[H].editRange=!0;he.value.includeFrom===!0&&(t[g].editRangeFrom=!0),he.value.includeTo===!0&&(t[Y].editRangeTo=!0)}M.value.year===U.value.year&&M.value.month===U.value.month&&(t[v+U.value.day-1].today=!0);const x=t.length%7;if(x>0){const g=7-x;for(let Y=1;Y<=g;Y++)t.push({i:Y,fill:!0})}return t.forEach(g=>{let Y="q-date__calendar-item ";g.fill===!0?Y+="q-date__calendar-item--fill":(Y+=`q-date__calendar-item--${g.in===!0?"in":"out"}`,g.range!==void 0&&(Y+=` q-date__range${g.rangeTo===!0?"-to":g.rangeFrom===!0?"-from":""}`),g.editRange===!0&&(Y+=` q-date__edit-range${g.editRangeFrom===!0?"-from":""}${g.editRangeTo===!0?"-to":""}`),(g.range!==void 0||g.editRange===!0)&&(Y+=` text-${g.color}`)),g.classes=Y}),t}),Wt=p(()=>e.disable===!0?{"aria-disabled":"true"}:{});ve(()=>e.modelValue,t=>{if(w===JSON.stringify(t))w=0;else{const a=ft(k.value,q.value);ue(a.year,a.month,a)}}),ve(N,()=>{j.value!==null&&l.$el.contains(document.activeElement)===!0&&j.value.focus()}),ve(()=>M.value.year+"|"+M.value.month,()=>{u("navigation",{year:M.value.year,month:M.value.month})}),ve(be,t=>{Dt(t,q.value,"mask"),k.value=t}),ve(Te,t=>{Dt(k.value,t,"locale"),q.value=t});function Qe(t){w=JSON.stringify(t)}function ct(){const{year:t,month:a,day:o}=U.value,d={...M.value,year:t,month:a,day:o},v=_e.value[ee(d)];(v===void 0||v.includes(d.day)===!1)&&ze(d),Ne(d.year,d.month)}function Xt(t){Vt(t)===!0&&(N.value=t)}function Gt(t,a){["month","year"].includes(t)&&(t==="month"?ht:Ae)(a===!0?-1:1)}function Ne(t,a){N.value="Calendar",ue(t,a)}function Kt(t,a){if(e.range===!1||!t){c.value=null;return}const o=Object.assign({...M.value},t),d=a!==void 0?Object.assign({...M.value},a):o;c.value={init:o,initHash:K(o),final:d,finalHash:K(d)},Ne(o.year,o.month)}function vt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ee(t,a,o){return At(t,a,o,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function ft(t,a){const o=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(o.length===0)return mt();const d=o[o.length-1],v=Ee(d.from!==void 0?d.from:d,t,a);return v.dateHash===null?mt():v}function mt(){let t,a;if(e.defaultYearMonth!==void 0){const o=e.defaultYearMonth.split("/");t=parseInt(o[0],10),a=parseInt(o[1],10)}else{const o=U.value!==void 0?U.value:f();t=o.year,a=o.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+S(a)+"/01"}}function ht(t){let a=M.value.year,o=Number(M.value.month)+t;o===13?(o=1,a++):o===0&&(o=12,a--),ue(a,o),we.value===!0&&Ce("month")}function Ae(t){const a=Number(M.value.year)+t;ue(a,M.value.month),we.value===!0&&Ce("year")}function ea(t){ue(t,M.value.month),N.value=e.defaultView==="Years"?"Months":"Calendar",we.value===!0&&Ce("year")}function ta(t){ue(M.value.year,t),N.value="Calendar",we.value===!0&&Ce("month")}function aa(t,a){(_e.value[a]?.includes(t.day)===!0?Be:ze)(t)}function ae(t){return{year:t.year,month:t.month,day:t.day}}function ue(t,a,o){if(E.value!==null&&t<=E.value.year&&((a<E.value.month||t<E.value.year)&&(a=E.value.month),t=E.value.year),A.value!==null&&t>=A.value.year&&((a>A.value.month||t>A.value.year)&&(a=A.value.month),t=A.value.year),o!==void 0){const{hour:v,minute:x,second:g,millisecond:Y,timezoneOffset:H,timeHash:ge}=o;Object.assign(M.value,{hour:v,minute:x,second:g,millisecond:Y,timezoneOffset:H,timeHash:ge})}const d=t+"/"+S(a)+"/01";d!==M.value.dateHash&&(le.value=M.value.dateHash<d==(r.lang.rtl!==!0)?"left":"right",t!==M.value.year&&(fe.value=le.value),Mt(()=>{h.value=t-t%J-(t<0?J:0),Object.assign(M.value,{year:t,month:a,day:1,dateHash:d})}))}function gt(t,a,o){const d=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:v,details:x}=yt(a,o);Qe(d),u("update:modelValue",d,v,x)}function Ce(t){const a=L.value[0]!==void 0&&L.value[0].dateHash!==null?{...L.value[0]}:{...M.value};Mt(()=>{a.year=M.value.year,a.month=M.value.month;const o=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():He(a.year,a.month);a.day=Math.min(Math.max(1,a.day),o);const d=se(a),{details:v}=yt("",a);Qe(d),u("update:modelValue",d,t,v)})}function yt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ae(a.target),from:ae(a.from),to:ae(a.to)}}:{reason:`${t}-day`,details:ae(a)}}function se(t,a,o){return t.from!==void 0?{from:Fe.value(t.from,a,o),to:Fe.value(t.to,a,o)}:Fe.value(t,a,o)}function ze(t){let a;if(e.multiple===!0)if(t.from!==void 0){const o=K(t.from),d=K(t.to),v=L.value.filter(g=>g.dateHash<o||g.dateHash>d),x=re.value.filter(({from:g,to:Y})=>Y.dateHash<o||g.dateHash>d);a=v.concat(x).concat(t).map(g=>se(g))}else{const o=Ie.value.slice();o.push(se(t)),a=o}else a=se(t);gt(a,"add",t)}function Be(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const o=se(t);t.from!==void 0?a=e.modelValue.filter(d=>d.from!==void 0?d.from!==o.from&&d.to!==o.to:!0):a=e.modelValue.filter(d=>d!==o),a.length===0&&(a=null)}gt(a,"remove",t)}function Dt(t,a,o){const d=L.value.concat(re.value).map(x=>se(x,t,a)).filter(x=>x.from!==void 0?x.from.dateHash!==null&&x.to.dateHash!==null:x.dateHash!==null),v=(e.multiple===!0?d:d[0])||null;Qe(v),u("update:modelValue",v,o)}function na(){if(e.minimal!==!0)return b("div",{class:"q-date__header "+m.value},[b("div",{class:"relative-position"},[b(ye,{name:"q-transition--fade"},()=>b("div",{key:"h-yr-"+ut.value,class:"q-date__header-subtitle q-date__header-link "+(N.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...y("vY",{onClick(){N.value="Years"},onKeyup(t){t.keyCode===13&&(N.value="Years")}})},[ut.value]))]),b("div",{class:"q-date__header-title relative-position flex no-wrap"},[b("div",{class:"relative-position col"},[b(ye,{name:"q-transition--fade"},()=>b("div",{key:"h-sub"+rt.value,class:"q-date__header-title-label q-date__header-link "+(N.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...y("vC",{onClick(){N.value="Calendar"},onKeyup(t){t.keyCode===13&&(N.value="Calendar")}})},[rt.value]))]),e.todayBtn===!0?b(T,{class:"q-date__header-today self-start",icon:r.iconSet.datetime.today,ariaLabel:r.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:ct}):null])])}function Ue({label:t,type:a,key:o,dir:d,goTo:v,boundaries:x,cls:g}){return[b("div",{class:"row items-center q-date__arrow"},[b(T,{round:!0,dense:!0,size:"sm",flat:!0,icon:xe.value[0],ariaLabel:a==="Years"?r.lang.date.prevYear:r.lang.date.prevMonth,tabindex:i.value,disable:x.prev===!1,...y("go-#"+a,{onClick(){v(-1)}})})]),b("div",{class:"relative-position overflow-hidden flex flex-center"+g},[b(ye,{name:"q-transition--jump-"+d},()=>b("div",{key:o},[b(T,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,...y("view#"+a,{onClick:()=>{N.value=a}})})]))]),b("div",{class:"row items-center q-date__arrow"},[b(T,{round:!0,dense:!0,size:"sm",flat:!0,icon:xe.value[1],ariaLabel:a==="Years"?r.lang.date.nextYear:r.lang.date.nextMonth,tabindex:i.value,disable:x.next===!1,...y("go+#"+a,{onClick(){v(1)}})})])]}const la={Calendar:()=>[b("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[b("div",{class:"q-date__navigation row items-center no-wrap"},Ue({label:q.value.months[M.value.month-1],type:"Months",key:M.value.month,dir:le.value,goTo:ht,boundaries:je.value.month,cls:" col"}).concat(Ue({label:M.value.year,type:"Years",key:M.value.year,dir:fe.value,goTo:Ae,boundaries:je.value.year,cls:""}))),b("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Pt.value.map(t=>b("div",{class:"q-date__calendar-item"},[b("div",t)]))),b("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[b(ye,{name:"q-transition--slide-"+le.value},()=>b("div",{key:P.value,class:"q-date__calendar-days fit"},dt.value.map(t=>b("div",{class:t.classes},[t.in===!0?b(T,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,...y("day#"+t.i,{onClick:()=>{oa(t.i)},onMouseover:()=>{ra(t.i)}})},t.event!==!1?()=>b("div",{class:"q-date__event bg-"+t.event}):null):b("div",""+t.i)]))))])])],Months(){const t=M.value.year===U.value.year,a=d=>E.value!==null&&M.value.year===E.value.year&&E.value.month>d||A.value!==null&&M.value.year===A.value.year&&A.value.month<d,o=q.value.monthsShort.map((d,v)=>{const x=M.value.month===v+1;return b("div",{class:"q-date__months-item flex flex-center"},[b(T,{class:t===!0&&U.value.month===v+1?"q-date__today":null,flat:x!==!0,label:d,unelevated:x,color:x===!0?z.value:null,textColor:x===!0?oe.value:null,tabindex:i.value,disable:a(v+1),...y("month#"+v,{onClick:()=>{ta(v+1)}})})])});return e.yearsInMonthView===!0&&o.unshift(b("div",{class:"row no-wrap full-width"},[Ue({label:M.value.year,type:"Years",key:M.value.year,dir:fe.value,goTo:Ae,boundaries:je.value.year,cls:" col"})])),b("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},o)},Years(){const t=h.value,a=t+J,o=[],d=v=>E.value!==null&&E.value.year>v||A.value!==null&&A.value.year<v;for(let v=t;v<=a;v++){const x=M.value.year===v;o.push(b("div",{class:"q-date__years-item flex flex-center"},[b(T,{key:"yr"+v,class:U.value.year===v?"q-date__today":null,flat:!x,label:v,dense:!0,unelevated:x,color:x===!0?z.value:null,textColor:x===!0?oe.value:null,tabindex:i.value,disable:d(v),...y("yr#"+v,{onClick:()=>{ea(v)}})})]))}return b("div",{class:"q-date__view q-date__years flex flex-center"},[b("div",{class:"col-auto"},[b(T,{round:!0,dense:!0,flat:!0,icon:xe.value[0],ariaLabel:r.lang.date.prevRangeYears(J),tabindex:i.value,disable:d(t),...y("y-",{onClick:()=>{h.value-=J}})})]),b("div",{class:"q-date__years-content col self-stretch row items-center"},o),b("div",{class:"col-auto"},[b(T,{round:!0,dense:!0,flat:!0,icon:xe.value[1],ariaLabel:r.lang.date.nextRangeYears(J),tabindex:i.value,disable:d(a),...y("y+",{onClick:()=>{h.value+=J}})})])])}};function oa(t){const a={...M.value,day:t};if(e.range===!1){aa(a,P.value);return}if(c.value===null){const o=dt.value.find(v=>v.fill!==!0&&v.i===t);if(e.noUnset!==!0&&o.range!==void 0){Be({target:a,from:o.range.from,to:o.range.to});return}if(o.selected===!0){Be(a);return}const d=K(a);c.value={init:a,initHash:d,final:a,finalHash:d},u("rangeStart",ae(a))}else{const o=c.value.initHash,d=K(a),v=o<=d?{from:c.value.init,to:a}:{from:a,to:c.value.init};c.value=null,ze(o===d?a:{target:a,...v}),u("rangeEnd",{from:ae(v.from),to:ae(v.to)})}}function ra(t){if(c.value!==null){const a={...M.value,day:t};Object.assign(c.value,{final:a,finalHash:K(a)})}}return Object.assign(l,{setToday:ct,setView:Xt,offsetCalendar:Gt,setCalendarTo:Ne,setEditingRange:Kt}),()=>{const t=[b("div",{class:"q-date__content col relative-position"},[b(ye,{name:"q-transition--fade"},la[N.value])])],a=fa(n.default);return a!==void 0&&t.push(b("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&Q(t,"push"),b("div",{class:I.value,...Wt.value},[na(),b("div",{ref:j,class:"q-date__main col column",tabindex:-1},t)])}}}),cn=Ot({name:"QPopupProxy",props:{...Va,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:n,emit:u,attrs:l}){const{proxy:r}=$t(),{$q:s}=r,y=$(!1),i=$(null),m=p(()=>parseInt(e.breakpoint,10)),{canShow:C}=qa({showing:y});function f(){return s.screen.width<m.value||s.screen.height<m.value?"dialog":"menu"}const w=$(f()),F=p(()=>w.value==="menu"?{maxHeight:"99vh"}:{});ve(()=>f(),k=>{y.value!==!0&&(w.value=k)});function Q(k){y.value=!0,u("show",k)}function j(k){y.value=!1,w.value=f(),u("hide",k)}return Object.assign(r,{show(k){C(k)===!0&&i.value.show(k)},hide(k){i.value.hide(k)},toggle(k){i.value.toggle(k)}}),ha(r,"currentComponent",()=>({type:w.value,ref:i.value})),()=>{const k={ref:i,...F.value,...l,onShow:Q,onHide:j};let q;return w.value==="dialog"?q=et:(q=Ya,Object.assign(k,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),b(q,k,n.default)}}}),vn={class:"row items-center justify-between q-mb-md"},fn={class:"text-h5 text-info flex items-center"},mn={class:"row q-gutter-sm"},hn={class:"row q-gutter-sm"},gn={key:0},yn={key:0},Dn={key:1,class:"text-center q-pa-sm text-grey"},Mn={key:1,class:"text-center q-pa-lg text-grey"},bn={class:"text-h6 text-primary"},pn={class:"text-h6 text-secondary"},wn={__name:"WorkTasksPage",setup(e){const n=Oa(),u=$([]),l=$(["預設分類"]),r=$(!1),s=$(!1),y=$(null),i=$({title:"",description:"",urgent:!1,completed:!1,category:"預設分類",dueDate:null}),m=$(""),C=$(null),f=$(null),w=[{label:"未完成",value:!1},{label:"已完成",value:!0}],F=$("dueDate"),Q=[{label:"截止日期",value:"dueDate"},{label:"標題",value:"title"},{label:"急件優先",value:"urgent"}];ya(()=>{const _=localStorage.getItem("workTasks");_&&(u.value=JSON.parse(_));const h=localStorage.getItem("workCategories");h&&(l.value=JSON.parse(h))});const j=()=>{localStorage.setItem("workTasks",JSON.stringify(u.value))},k=()=>{l.value=l.value.filter(_=>_.trim()!==""),localStorage.setItem("workCategories",JSON.stringify(l.value)),s.value=!1},q=p(()=>C.value?[C.value]:l.value),be=_=>{const h=u.value.filter(c=>c.category===_&&(!m.value||c.title.includes(m.value)||c.description.includes(m.value))&&(f.value===null||c.completed===f.value));return Te(h)},Te=_=>F.value==="dueDate"?_.slice().sort((h,c)=>h.dueDate?c.dueDate?new Date(h.dueDate)-new Date(c.dueDate):-1:1):F.value==="title"?_.slice().sort((h,c)=>h.title.localeCompare(c.title)):F.value==="urgent"?_.slice().sort((h,c)=>c.urgent===h.urgent?0:c.urgent?1:-1):_,U=(_=null)=>{_?(y.value=_,i.value={..._}):(y.value=null,i.value={title:"",description:"",urgent:!1,completed:!1,category:l.value[0],dueDate:kt.formatDate(new Date,"YYYY-MM-DD")}),r.value=!0},M=()=>{i.value.title.trim()&&(y.value?Object.assign(y.value,i.value):u.value.push({id:wa(),...i.value}),j(),r.value=!1)},N=_=>{const h=u.value.find(c=>c.id===_);n.dialog({title:"確認刪除",message:`確定要刪除任務「${h?.title||""}」嗎？`,cancel:!0,persistent:!0}).onOk(()=>{u.value=u.value.filter(c=>c.id!==_),j(),n.notify({type:"positive",message:"任務已刪除"})})},pe=_=>{const h=l.value[_];n.dialog({title:"確認刪除分類",message:`確定要刪除分類「${h}」嗎？
此分類的任務將移動到「預設分類」。`,cancel:!0,persistent:!0}).onOk(()=>{u.value.forEach(c=>{c.category===h&&(c.category="預設分類")}),l.value.splice(_,1),k(),n.notify({type:"warning",message:`分類「${h}」已刪除，相關任務移至預設分類`})})},le=_=>_?kt.formatDate(_,"YYYY/MM/DD"):"未設定",fe=_=>!_.dueDate||_.completed?!1:new Date(_.dueDate)<new Date;return(_,h)=>(Z(),Se(Ha,{class:"q-pa-md"},{default:V(()=>[ne("div",vn,[ne("div",fn,[D(G,{name:"assignment",size:"md",class:"q-mr-sm text-info"}),h[15]||(h[15]=ie(" 工作代辦事項 "))]),ne("div",mn,[D(T,{unelevated:"",icon:"add",label:"新增任務",color:"primary",onClick:h[0]||(h[0]=c=>U())}),D(T,{unelevated:"",icon:"category",label:"分類管理",color:"secondary",onClick:h[1]||(h[1]=c=>s.value=!0)})])]),D(Pe,{flat:"",bordered:"",class:"q-mb-md shadow-2 rounded-borders"},{default:V(()=>[D(De,null,{default:V(()=>[ne("div",hn,[D(Me,{filled:"",dense:"",modelValue:m.value,"onUpdate:modelValue":h[2]||(h[2]=c=>m.value=c),placeholder:"搜尋任務...",debounce:"300",clearable:"",class:"col"},{append:V(()=>[D(G,{name:"search"})]),_:1},8,["modelValue"]),D(Ve,{filled:"",dense:"",modelValue:C.value,"onUpdate:modelValue":h[3]||(h[3]=c=>C.value=c),options:l.value.map(c=>({label:c,value:c})),"option-value":"value","option-label":"label","emit-value":"","map-options":"",placeholder:"分類",clearable:"",class:"col-2"},null,8,["modelValue","options"]),D(Ve,{filled:"",dense:"",modelValue:f.value,"onUpdate:modelValue":h[4]||(h[4]=c=>f.value=c),options:w,"option-value":"value","option-label":"label","emit-value":"","map-options":"",placeholder:"狀態",clearable:"",class:"col-2"},null,8,["modelValue"]),D(Ve,{filled:"",dense:"",modelValue:F.value,"onUpdate:modelValue":h[5]||(h[5]=c=>F.value=c),options:Q,"option-value":"value","option-label":"label","emit-value":"","map-options":"",placeholder:"排序",class:"col-2"},null,8,["modelValue"])])]),_:1})]),_:1}),u.value.length>0?(Z(),X("div",gn,[D(Sa,{bordered:"",separator:"",class:"rounded-borders shadow-2"},{default:V(()=>[(Z(!0),X(Ze,null,Le(q.value,c=>(Z(),Se(Ca,{key:c,label:c,icon:"folder","expand-icon":"expand_more","header-class":"bg-info text-white",style:{"font-size":"20px"}},{default:V(()=>[be(c).length>0?(Z(),X("div",yn,[(Z(!0),X(Ze,null,Le(be(c),I=>Re((Z(),Se(xa,{key:I.id,class:"q-pa-sm task-item",clickable:""},{default:V(()=>[D(Je,{side:""},{default:V(()=>[D(Da,{modelValue:I.completed,"onUpdate:modelValue":[z=>I.completed=z,j],color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),D(Je,null,{default:V(()=>[D(We,{class:bt(I.completed?"text-strike text-grey-6":"text-body1")},{default:V(()=>[I.urgent?(Z(),Se(G,{key:0,name:"priority_high",color:"negative",size:"sm",class:"q-mr-xs"})):Ma("",!0),ie(" "+ke(I.title),1)]),_:2},1032,["class"]),D(We,{caption:"",class:"text-grey-7"},{default:V(()=>[ie(ke(I.description),1)]),_:2},1024),D(We,{caption:""},{default:V(()=>[D(G,{name:"event",size:"sm",class:"q-mr-xs text-primary"}),ne("span",{class:bt(fe(I)?"text-negative":"")},ke(le(I.dueDate)),3)]),_:2},1024)]),_:2},1024),D(Je,{side:""},{default:V(()=>[D(T,{dense:"",flat:"",round:"",icon:"edit",color:"primary",onClick:pt(z=>U(I),["stop"])},null,8,["onClick"]),D(T,{dense:"",flat:"",round:"",icon:"delete",color:"negative",onClick:pt(z=>N(I.id),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[ba]])),128))])):(Z(),X("div",Dn,"無任務"))]),_:2},1032,["label"]))),128))]),_:1})])):(Z(),X("div",Mn,[D(G,{name:"inbox",size:"lg",class:"q-mb-sm"}),h[16]||(h[16]=ie(" 尚未新增任何任務 "))])),D(et,{modelValue:r.value,"onUpdate:modelValue":h[12]||(h[12]=c=>r.value=c)},{default:V(()=>[D(Pe,{style:{"min-width":"400px"},class:"rounded-borders shadow-4"},{default:V(()=>[D(De,null,{default:V(()=>[ne("div",bn,[D(G,{name:"edit_note",class:"q-mr-sm"}),ie(" "+ke(y.value?"編輯任務":"新增任務"),1)])]),_:1}),D(De,null,{default:V(()=>[D(Me,{modelValue:i.value.title,"onUpdate:modelValue":h[6]||(h[6]=c=>i.value.title=c),label:"標題",filled:"",dense:"",autofocus:""},null,8,["modelValue"]),D(Me,{modelValue:i.value.description,"onUpdate:modelValue":h[7]||(h[7]=c=>i.value.description=c),label:"描述",type:"textarea",filled:"",dense:"",class:"q-mt-sm"},null,8,["modelValue"]),D(Ve,{modelValue:i.value.category,"onUpdate:modelValue":h[8]||(h[8]=c=>i.value.category=c),options:l.value,label:"分類",filled:"",dense:"",class:"q-mt-sm"},null,8,["modelValue","options"]),D(Me,{filled:"",dense:"",modelValue:i.value.dueDate,"onUpdate:modelValue":h[10]||(h[10]=c=>i.value.dueDate=c),label:"截止日期",mask:"####-##-##",class:"q-mt-sm"},{append:V(()=>[D(G,{name:"event",class:"cursor-pointer"},{default:V(()=>[D(cn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:V(()=>[D(dn,{modelValue:i.value.dueDate,"onUpdate:modelValue":h[9]||(h[9]=c=>i.value.dueDate=c),mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),D(pa,{modelValue:i.value.urgent,"onUpdate:modelValue":h[11]||(h[11]=c=>i.value.urgent=c),label:"急件",color:"negative",class:"q-mt-sm"},null,8,["modelValue"])]),_:1}),D(wt,{align:"right"},{default:V(()=>[Re(D(T,{flat:"",label:"取消",color:"grey"},null,512),[[Yt]]),D(T,{unelevated:"",label:"儲存",color:"primary",onClick:M})]),_:1})]),_:1})]),_:1},8,["modelValue"]),D(et,{modelValue:s.value,"onUpdate:modelValue":h[14]||(h[14]=c=>s.value=c)},{default:V(()=>[D(Pe,{style:{"min-width":"350px"},class:"rounded-borders shadow-4"},{default:V(()=>[D(De,null,{default:V(()=>[ne("div",pn,[D(G,{name:"category",class:"q-mr-sm"}),h[17]||(h[17]=ie(" 分類管理 "))])]),_:1}),D(De,null,{default:V(()=>[(Z(!0),X(Ze,null,Le(l.value,(c,I)=>(Z(),X("div",{key:I,class:"row items-center q-mb-sm"},[D(Me,{dense:"",filled:"",modelValue:l.value[I],"onUpdate:modelValue":z=>l.value[I]=z,class:"col"},null,8,["modelValue","onUpdate:modelValue"]),D(T,{dense:"",flat:"",round:"",icon:"delete",color:"negative",onClick:z=>pe(I)},null,8,["onClick"])]))),128)),D(T,{dense:"",unelevated:"",icon:"add",label:"新增分類",color:"secondary",class:"q-mt-sm",onClick:h[13]||(h[13]=c=>l.value.push("新分類"))})]),_:1}),D(wt,{align:"right"},{default:V(()=>[Re(D(T,{flat:"",label:"關閉",color:"grey"},null,512),[[Yt]]),D(T,{unelevated:"",label:"儲存",color:"secondary",onClick:k})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},In=ga(wn,[["__scopeId","data-v-0503002a"]]);export{In as default};
