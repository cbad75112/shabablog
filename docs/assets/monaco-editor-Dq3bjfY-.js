import{d as te,h as w,s as M,c as $,b as re,w as y,r as ne,o as U,n as q}from"./index-TuwWOvZW.js";function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(n){se(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ve(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function ge(e,t){if(e==null)return{};var r=ve(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pe(e,t){return me(e)||he(e,t)||ye(e,t)||be()}function me(e){if(Array.isArray(e))return e}function he(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),u;!(n=(u=o.next()).done)&&(r.push(u.value),!(t&&r.length===t));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function ye(e,t){if(e){if(typeof e=="string")return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}function W(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(n){Oe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Se(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(a,i){return i(a)},n)}}function P(e){return function t(){for(var r=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return a.length>=e.length?e.apply(this,a):function(){for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return t.apply(r,[].concat(a,u))}}}function V(e){return{}.toString.call(e).includes("Object")}function we(e){return!Object.keys(e).length}function _(e){return typeof e=="function"}function je(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pe(e,t){return V(t)||b("changeType"),Object.keys(t).some(function(r){return!je(e,r)})&&b("changeField"),t}function _e(e){_(e)||b("selectorType")}function Me(e){_(e)||V(e)||b("handlerType"),V(e)&&Object.values(e).some(function(t){return!_(t)})&&b("handlersType")}function Ee(e){e||b("initialIsRequired"),V(e)||b("initialType"),we(e)&&b("initialContent")}function Ie(e,t){throw new Error(e[t]||e.default)}var $e={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},b=P(Ie)($e),I={changes:Pe,selector:_e,handler:Me,initial:Ee};function Ve(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};I.initial(e),I.handler(t);var r={current:e},n=P(De)(r,t),a=P(Ce)(r),i=P(I.changes)(e),o=P(Te)(r);function u(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(l){return l};return I.selector(v),v(r.current)}function d(v){Se(n,a,i,o)(v)}return[u,d]}function Te(e,t){return _(t)?t(e.current):t}function Ce(e,t){return e.current=K(K({},e.current),t),t}function De(e,t,r){return _(t)?t(e.current):Object.keys(r).forEach(function(n){var a;return(a=t[n])===null||a===void 0?void 0:a.call(t,e.current[n])}),r}var Ae={create:Ve},xe={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function Le(e){return function t(){for(var r=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return a.length>=e.length?e.apply(this,a):function(){for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return t.apply(r,[].concat(a,u))}}}function Ne(e){return{}.toString.call(e).includes("Object")}function Fe(e){return e||R("configIsRequired"),Ne(e)||R("configType"),e.urls?(Ue(),{paths:{vs:e.urls.monacoBase}}):e}function Ue(){console.warn(ae.deprecation)}function qe(e,t){throw new Error(e[t]||e.default)}var ae={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},R=Le(qe)(ae),ze={config:Fe},He=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(a){return r.reduceRight(function(i,o){return o(i)},a)}};function ie(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],ie(e[r],t[r]))}),H(H({},e),t)}var We={type:"cancelation",msg:"operation is manually canceled"};function D(e){var t=!1,r=new Promise(function(n,a){e.then(function(i){return t?a(We):n(i)}),e.catch(a)});return r.cancel=function(){return t=!0},r}var Be=Ae.create({config:xe,isInitialized:!1,resolve:null,reject:null,monaco:null}),oe=pe(Be,2),E=oe[0],C=oe[1];function Ke(e){var t=ze.config(e),r=t.monaco,n=ge(t,["monaco"]);C(function(a){return{config:ie(a.config,n),monaco:r}})}function Re(){var e=E(function(t){var r=t.monaco,n=t.isInitialized,a=t.resolve;return{monaco:r,isInitialized:n,resolve:a}});if(!e.isInitialized){if(C({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),D(A);if(window.monaco&&window.monaco.editor)return ue(window.monaco),e.resolve(window.monaco),D(A);He(Ge,Je)(Qe)}return D(A)}function Ge(e){return document.body.appendChild(e)}function Ye(e){var t=document.createElement("script");return e&&(t.src=e),t}function Je(e){var t=E(function(n){var a=n.config,i=n.reject;return{config:a,reject:i}}),r=Ye("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function Qe(){var e=E(function(r){var n=r.config,a=r.resolve,i=r.reject;return{config:n,resolve:a,reject:i}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){ue(r),e.resolve(r)},function(r){e.reject(r)})}function ue(e){E().monaco||C({monaco:e})}function Xe(){return E(function(e){var t=e.monaco;return t})}var A=new Promise(function(e,t){return C({resolve:e,reject:t})}),N={config:Ke,init:Re,__getMonacoInstance:Xe},Ze=Object.defineProperty,ke=Object.defineProperties,et=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))tt.call(t,r)&&Y(e,r,t[r]);if(G)for(var r of G(t))rt.call(t,r)&&Y(e,r,t[r]);return e},nt=(e,t)=>ke(e,et(t));const L={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function le(e,t){const r=$(()=>{const{width:a,height:i}=e;return nt(x({},L.wrapper),{width:a,height:i})}),n=$(()=>x(x({},L.fullWidth),!t.value&&L.hide));return{wrapperStyle:r,containerStyle:n}}function ce(){const e=M(N.__getMonacoInstance()),t=ne(!1);let r;return U(()=>{e.value||(r=N.init(),r.then(a=>e.value=a).catch(a=>{a?.type!=="cancelation"&&(t.value=!0,console.error("Monaco initialization error:",a))}))}),{monacoRef:e,unload:()=>r?.cancel(),isLoadFailed:t}}function T(e){return typeof e=="function"?e():e}function F(e){return e===void 0}function j(e,t,r,n){return at(e,n)||it(e,t,r,n)}function at(e,t){return e.editor.getModel(de(e,t))}function it(e,t,r,n){return e.editor.createModel(t,r,n?de(e,n):void 0)}function de(e,t){return e.Uri.parse(t)}var ot=Object.defineProperty,J=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,Q=(e,t,r)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ct=(e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&Q(e,r,t[r]);if(J)for(var r of J(t))lt.call(t,r)&&Q(e,r,t[r]);return e};const dt={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var X=te({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,t){const r=new Map,n=M(null),{monacoRef:a,unload:i,isLoadFailed:o}=ce(),{editorRef:u}=ft(t,e,a,n),{disposeValidator:d}=st(t,e,a,u),v=$(()=>!!a.value&&!!u.value),{wrapperStyle:l,containerStyle:g}=le(e,v);return re(()=>{var c,s;(c=d.value)==null||c.call(d),u.value?((s=u.value.getModel())==null||s.dispose(),u.value.dispose()):i()}),y([()=>e.path,()=>e.value,()=>e.language,()=>e.line],([c,s,p,m],[h,O,f,S])=>{if(v.value){if(c!==h){const fe=j(a.value,s||e.defaultValue||"",p||e.defaultLanguage||"",c||e.defaultPath||"");e.saveViewState&&r.set(h,u.value.saveViewState()),u.value.setModel(fe),e.saveViewState&&u.value.restoreViewState(r.get(c)),F(m)||u.value.revealLine(m);return}u.value.getValue()!==s&&u.value.setValue(s),p!==f&&a.value.editor.setModelLanguage(u.value.getModel(),p),!F(m)&&m!==S&&u.value.revealLine(m)}}),y(()=>e.options,c=>u.value&&u.value.updateOptions(c),{deep:!0}),y(()=>e.theme,c=>a.value&&a.value.editor.setTheme(c)),{containerRef:n,isEditorReady:v,isLoadFailed:o,wrapperStyle:l,containerStyle:g}},render(){const{$slots:e,isEditorReady:t,isLoadFailed:r,wrapperStyle:n,containerStyle:a,className:i}=this;return w("div",{style:n},[!t&&w("div",{style:dt},r?e.failure?T(e.failure):"load failed":e.default?T(e.default):"loading..."),w("div",{ref:"containerRef",key:"monaco_editor_container",style:a,class:i})])}});function ft({emit:e},t,r,n){const a=M(null);U(()=>{const o=y(r,()=>{n.value&&r.value&&(q(()=>o()),i())},{immediate:!0})});function i(){var o;if(!n.value||!r.value||a.value)return;e("beforeMount",r.value);const u=t.path||t.defaultPath,d=j(r.value,t.value||t.defaultValue||"",t.language||t.defaultLanguage||"",u||"");a.value=r.value.editor.create(n.value,ct({model:d,theme:t.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},t.options),t.overrideServices),(o=a.value)==null||o.onDidChangeModelContent(v=>{const l=a.value.getValue();l!==t.value&&(e("update:value",l),e("change",l,v))}),a.value&&!F(t.line)&&a.value.revealLine(t.line),e("mount",a.value,r.value)}return{editorRef:a}}function st({emit:e},t,r,n){const a=ne(null),i=y([r,n],()=>{if(r.value&&n.value){q(()=>i());const o=r.value.editor.onDidChangeMarkers(u=>{var d,v;const l=(v=(d=n.value)==null?void 0:d.getModel())==null?void 0:v.uri;if(l&&u.find(c=>c.path===l.path)){const c=r.value.editor.getModelMarkers({resource:l});e("validate",c)}});a.value=()=>o?.dispose()}});return{disposeValidator:a}}var vt=Object.defineProperty,Z=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mt=(e,t)=>{for(var r in t||(t={}))gt.call(t,r)&&k(e,r,t[r]);if(Z)for(var r of Z(t))pt.call(t,r)&&k(e,r,t[r]);return e};const ht={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var ee=te({name:"VueMonacoDiffEditor",props:{original:String,modified:String,language:String,originalLanguage:String,modifiedLanguage:String,originalModelPath:String,modifiedModelPath:String,theme:{type:String,default:"vs"},options:{type:Object,default:()=>({})},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},setup(e,t){const r=M(null),{monacoRef:n,unload:a,isLoadFailed:i}=ce(),{diffEditorRef:o}=yt(t,e,n,r),u=$(()=>!!n.value&&!!o.value),{wrapperStyle:d,containerStyle:v}=le(e,u);return re(()=>{var l,g,c,s,p,m,h,O;!n.value&&a();const f=(g=(l=o.value)==null?void 0:l.getModel)==null?void 0:g.call(l);(s=(c=f?.original)==null?void 0:c.dispose)==null||s.call(c),(m=(p=f?.modified)==null?void 0:p.dispose)==null||m.call(p),(O=(h=o.value)==null?void 0:h.dispose)==null||O.call(h)}),y([()=>e.originalModelPath,()=>e.original,()=>e.originalLanguage,()=>e.language],([l,g,c,s],[p,m,h,O])=>{if(!u.value)return;const f=o.value.getOriginalEditor();if(l!==p){const S=j(n.value,g||"",c||s||"text",l||"");f.setModel(S);return}g!==f.getValue()&&f.setValue(g||""),(c!==h||s!==O)&&n.value.editor.setModelLanguage(o.value.getModel().original,c||s||"text")}),y([()=>e.modifiedModelPath,()=>e.modified,()=>e.modifiedLanguage,()=>e.language],([l,g,c,s],[p,m,h,O])=>{if(!u.value)return;const f=o.value.getModifiedEditor();if(p!==l){const S=j(n.value,g||"",c||s||"text",l||"");f.setModel(S);return}if(g!==f.getValue()){const S=n.value.editor.EditorOption.readOnly;f.getOption(S)?f.setValue(g||""):(f.executeEdits("",[{range:f.getModel().getFullModelRange(),text:g||"",forceMoveMarkers:!0}]),f.pushUndoStop())}(c!==h||s!==O)&&n.value.editor.setModelLanguage(o.value.getModel().modified,c||s||"text")}),y(()=>e.theme,()=>{var l;return(l=n.value)==null?void 0:l.editor.setTheme(e.theme)}),y(()=>e.options,()=>{var l;return(l=o.value)==null?void 0:l.updateOptions(e.options)},{deep:!0}),{containerRef:r,isDiffEditorReady:u,isLoadFailed:i,wrapperStyle:d,containerStyle:v}},render(){const{$slots:e,isDiffEditorReady:t,isLoadFailed:r,wrapperStyle:n,containerStyle:a,className:i}=this;return w("div",{style:n},[!t&&w("div",{style:ht},r?e.failure?T(e.failure):"load failed":e.default?T(e.default):"loading..."),w("div",{ref:"containerRef",key:"monaco_diff_editor_container",style:a,class:i})])}});function yt({emit:e},t,r,n){const a=M(null);U(()=>{const o=y(r,()=>{n.value&&r.value&&(q(()=>o()),i())},{immediate:!0})});function i(){var o;if(!n.value||!r.value||a.value)return;e("beforeMount",r.value),a.value=r.value.editor.createDiffEditor(n.value,mt({automaticLayout:!0,autoIndent:"brackets",theme:t.theme,formatOnPaste:!0,formatOnType:!0},t.options));const u=j(r.value,t.original||"",t.originalLanguage||t.language||"text",t.originalModelPath||""),d=j(r.value,t.modified||"",t.modifiedLanguage||t.language||"text",t.modifiedModelPath||"");(o=a.value)==null||o.setModel({original:u,modified:d}),e("mount",a.value,r.value)}return{diffEditorRef:a}}function bt(e,t){t&&N.config(t),e.component(X.name,X),e.component(ee.name,ee)}const St=({app:e})=>{e.use(bt,{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}})};export{St as default};
