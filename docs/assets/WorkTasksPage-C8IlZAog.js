import{A as Be,M as jt,h,aj as xe,aZ as Da,B as ba,C as Ft,D as Ma,a_ as At,g as rt,E as Lt,r as $,a$ as wa,J as xa,c as x,w as ae,b0 as Et,a9 as St,N as Le,b1 as pa,P as Nt,ab as X,z as Sa,b2 as Qt,b3 as Bt,b4 as _a,aP as Ya,b5 as ka,b6 as Ca,n as _t,b7 as qa,af as L,aV as Ta,al as lt,ay as Ia,o as Va,a3 as ee,a4 as N,a5 as V,a6 as ve,f as S,a7 as re,a8 as De,ai as be,ag as qe,am as Ge,an as Te,ao as Ie,F as Ke,aa as et,ax as Ha,ae as Yt,ac as je,aA as kt,ad as Oa,ah as $a,ap as Ct}from"./index-Diujp8v7.js";import{b as ja,Q as Fe}from"./QSelect-BgsxzK3F.js";import{Q as zt,a as pe}from"./QItem-B11hcjTb.js";import{Q as Ve}from"./QItemLabel-D96q5sWu.js";import{Q as Fa}from"./QList-BTkh-1ce.js";import{u as Aa}from"./use-render-cache-DLxPkVnQ.js";import{p as T,c as La}from"./format-DyQxkAtJ.js";import{e as Ea,c as Na}from"./position-engine-7x5zhLB5.js";import{Q as Qa}from"./QPage-rDFG9wNg.js";import{u as Ba,C as qt}from"./useAuthStore-zZ6hy-F4.js";import{u as za}from"./use-quasar-CSzWwFYe.js";import"./selection-M1LSKmIB.js";const Pa=Be({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:n,emit:s}){let l=!1,o,u,g=null,i=null,d,q;function v(){o?.(),o=null,l=!1,g!==null&&(clearTimeout(g),g=null),i!==null&&(clearTimeout(i),i=null),u?.removeEventListener("transitionend",d),d=null}function M(y,Y,R){Y!==void 0&&(y.style.height=`${Y}px`),y.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,l=!0,o=R}function F(y,Y){y.style.overflowY=null,y.style.height=null,y.style.transition=null,v(),Y!==q&&s(Y)}function j(y,Y){let R=0;u=y,l===!0?(v(),R=y.offsetHeight===y.scrollHeight?0:void 0):(q="hide",y.style.overflowY="hidden"),M(y,R,Y),g=setTimeout(()=>{g=null,y.style.height=`${y.scrollHeight}px`,d=U=>{i=null,(Object(U)!==U||U.target===y)&&F(y,"show")},y.addEventListener("transitionend",d),i=setTimeout(d,e.duration*1.1)},100)}function A(y,Y){let R;u=y,l===!0?v():(q="show",y.style.overflowY="hidden",R=y.scrollHeight),M(y,R,Y),g=setTimeout(()=>{g=null,y.style.height=0,d=U=>{i=null,(Object(U)!==U||U.target===y)&&F(y,"hide")},y.addEventListener("transitionend",d),i=setTimeout(d,e.duration*1.1)},100)}return jt(()=>{l===!0&&v()}),()=>h(xe,{css:!1,appear:e.appear,onEnter:j,onLeave:A},n.default)}}),fe=Da({}),Ua=Object.keys(At),Ra=Be({name:"QExpansionItem",props:{...At,...Ma,...Ft,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ba,"click","afterShow","afterHide"],setup(e,{slots:n,emit:s}){const{proxy:{$q:l}}=rt(),o=Lt(e,l),u=$(e.modelValue!==null?e.modelValue:e.defaultOpened),g=$(null),i=wa(),{show:d,hide:q,toggle:v}=xa({showing:u});let M,F;const j=x(()=>`q-expansion-item q-item-type q-expansion-item--${u.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),A=x(()=>e.contentInsetLevel===void 0?null:{["padding"+(l.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),y=x(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),Y=x(()=>{const p={};return Ua.forEach(Q=>{p[Q]=e[Q]}),p}),R=x(()=>y.value===!0||e.expandIconToggle!==!0),U=x(()=>e.expandedIcon!==void 0&&u.value===!0?e.expandedIcon:e.expandIcon||l.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),Z=x(()=>e.disable!==!0&&(y.value===!0||e.expandIconToggle===!0)),w=x(()=>({expanded:u.value===!0,detailsId:i.value,toggle:v,show:d,hide:q})),E=x(()=>{const p=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:l.lang.label[u.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":u.value===!0?"true":"false","aria-controls":i.value,"aria-label":p}});ae(()=>e.group,p=>{F?.(),p!==void 0&&f()});function me(p){y.value!==!0&&v(p),s("click",p)}function ne(p){p.keyCode===13&&le(p,!0)}function le(p,Q){Q!==!0&&p.qAvoidFocus!==!0&&g.value?.focus(),v(p),Sa(p)}function de(){s("afterShow")}function C(){s("afterHide")}function f(){M===void 0&&(M=Et()),u.value===!0&&(fe[e.group]=M);const p=ae(u,K=>{K===!0?fe[e.group]=M:fe[e.group]===M&&delete fe[e.group]}),Q=ae(()=>fe[e.group],(K,_e)=>{_e===M&&K!==void 0&&K!==M&&q()});F=()=>{p(),Q(),fe[e.group]===M&&delete fe[e.group],F=void 0}}function D(){const p={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},Q=[h(X,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&u.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:U.value})];return Z.value===!0&&(Object.assign(p,{tabindex:0,...E.value,onClick:le,onKeyup:ne}),Q.unshift(h("div",{ref:g,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),h(pe,p,()=>Q)}function I(){let p;return n.header!==void 0?p=[].concat(n.header(w.value)):(p=[h(pe,()=>[h(Ve,{lines:e.labelLines},()=>e.label||""),e.caption?h(Ve,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&p[e.switchToggleSide===!0?"push":"unshift"](h(pe,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>h(X,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&p[e.switchToggleSide===!0?"unshift":"push"](D()),p}function B(){const p={ref:"item",style:e.headerStyle,class:e.headerClass,dark:o.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return R.value===!0&&(p.clickable=!0,p.onClick=me,Object.assign(p,y.value===!0?Y.value:E.value)),h(zt,p,I)}function ge(){return Le(h("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:A.value,id:i.value},Nt(n.default)),[[pa,u.value]])}function Se(){const p=[B(),h(Pa,{duration:e.duration,onShow:de,onHide:C},ge)];return e.expandSeparator===!0&&p.push(h(St,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:o.value}),h(St,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:o.value})),p}return e.group!==void 0&&f(),jt(()=>{F?.()}),()=>h("div",{class:j.value},[h("div",{class:"q-expansion-item__container relative-position"},Se())])}}),ie=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Za(e,n,s){return Object.prototype.toString.call(e)==="[object Date]"&&(s=e.getDate(),n=e.getMonth()+1,e=e.getFullYear()),Ga(ut(e,n,s))}function Tt(e,n,s){return Ut(Xa(e,n,s))}function Ja(e){return Wa(e)===0}function Ee(e,n){return n<=6?31:n<=11||Ja(e)?30:29}function Wa(e){const n=ie.length;let s=ie[0],l,o,u,g,i;if(e<s||e>=ie[n-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<n&&(l=ie[i],o=l-s,!(e<l));i+=1)s=l;return g=e-s,o-g<6&&(g=g-o+O(o+4,33)*33),u=J(J(g+1,33)-1,4),u===-1&&(u=4),u}function Pt(e,n){const s=ie.length,l=e+621;let o=-14,u=ie[0],g,i,d,q,v;if(e<u||e>=ie[s-1])throw new Error("Invalid Jalaali year "+e);for(v=1;v<s&&(g=ie[v],i=g-u,!(e<g));v+=1)o=o+O(i,33)*8+O(J(i,33),4),u=g;q=e-u,o=o+O(q,33)*8+O(J(q,33)+3,4),J(i,33)===4&&i-q===4&&(o+=1);const M=O(l,4)-O((O(l,100)+1)*3,4)-150,F=20+o-M;return n||(i-q<6&&(q=q-i+O(i+4,33)*33),d=J(J(q+1,33)-1,4),d===-1&&(d=4)),{leap:d,gy:l,march:F}}function Xa(e,n,s){const l=Pt(e,!0);return ut(l.gy,3,l.march)+(n-1)*31-O(n,7)*(n-7)+s-1}function Ga(e){const n=Ut(e).gy;let s=n-621,l,o,u;const g=Pt(s,!1),i=ut(n,3,g.march);if(u=e-i,u>=0){if(u<=185)return o=1+O(u,31),l=J(u,31)+1,{jy:s,jm:o,jd:l};u-=186}else s-=1,u+=179,g.leap===1&&(u+=1);return o=7+O(u,30),l=J(u,30)+1,{jy:s,jm:o,jd:l}}function ut(e,n,s){let l=O((e+O(n-8,6)+100100)*1461,4)+O(153*J(n+9,12)+2,5)+s-34840408;return l=l-O(O(e+100100+O(n-8,6),100)*3,4)+752,l}function Ut(e){let n=4*e+139361631;n=n+O(O(4*e+183187720,146097)*3,4)*4-3908;const s=O(J(n,1461),4)*5+308,l=O(J(s,153),5)+1,o=J(O(s,153),12)+1;return{gy:O(n,1461)-100100+O(8-o,6),gm:o,gd:l}}function O(e,n){return~~(e/n)}function J(e,n){return e-~~(e/n)*n}const Ka=["gregorian","persian"],It={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ka.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},en=["update:modelValue"];function ue(e){return e.year+"/"+T(e.month)+"/"+T(e.day)}function tn(e,n){const s=x(()=>e.disable!==!0&&e.readonly!==!0),l=x(()=>s.value===!0?0:-1),o=x(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function u(){return e.locale!==void 0?{...n.lang.date,...e.locale}:n.lang.date}function g(i){const d=new Date,q=i===!0?null:0;if(e.calendar==="persian"){const v=Za(d);return{year:v.jy,month:v.jm,day:v.jd}}return{year:d.getFullYear(),month:d.getMonth()+1,day:d.getDate(),hour:q,minute:q,second:q,millisecond:q}}return{editable:s,tabindex:l,headerClass:o,getLocale:u,getCurrentDate:g}}const Rt=864e5,an=36e5,ot=6e4,Zt="YYYY-MM-DDTHH:mm:ss.SSSZ",nn=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,ln=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,tt={};function on(e,n){const s="("+n.days.join("|")+")",l=e+s;if(tt[l]!==void 0)return tt[l];const o="("+n.daysShort.join("|")+")",u="("+n.months.join("|")+")",g="("+n.monthsShort.join("|")+")",i={};let d=0;const q=e.replace(ln,M=>{switch(d++,M){case"YY":return i.YY=d,"(-?\\d{1,2})";case"YYYY":return i.YYYY=d,"(-?\\d{1,4})";case"M":return i.M=d,"(\\d{1,2})";case"Mo":return i.M=d++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return i.M=d,"(\\d{2})";case"MMM":return i.MMM=d,g;case"MMMM":return i.MMMM=d,u;case"D":return i.D=d,"(\\d{1,2})";case"Do":return i.D=d++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=d,"(\\d{2})";case"H":return i.H=d,"(\\d{1,2})";case"HH":return i.H=d,"(\\d{2})";case"h":return i.h=d,"(\\d{1,2})";case"hh":return i.h=d,"(\\d{2})";case"m":return i.m=d,"(\\d{1,2})";case"mm":return i.m=d,"(\\d{2})";case"s":return i.s=d,"(\\d{1,2})";case"ss":return i.s=d,"(\\d{2})";case"S":return i.S=d,"(\\d{1})";case"SS":return i.S=d,"(\\d{2})";case"SSS":return i.S=d,"(\\d{3})";case"A":return i.A=d,"(AM|PM)";case"a":return i.a=d,"(am|pm)";case"aa":return i.aa=d,"(a\\.m\\.|p\\.m\\.)";case"ddd":return o;case"dddd":return s;case"Q":case"d":case"E":return"(\\d{1})";case"do":return d++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return d++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return d++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return i.Z=d,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=d,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=d,"(-?\\d+)";case"x":return i.x=d,"(-?\\d{4,})";default:return d--,M[0]==="["&&(M=M.substring(1,M.length-1)),M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),v={map:i,regex:new RegExp("^"+q)};return tt[l]=v,v}function Jt(e,n){return e!==void 0?e:n!==void 0?n.date:_a.date}function Vt(e,n=""){const s=e>0?"-":"+",l=Math.abs(e),o=Math.floor(l/60),u=l%60;return s+T(o)+n+T(u)}function rn(e,n,s){let l=e.getFullYear(),o=e.getMonth();const u=e.getDate();return n.year!==void 0&&(l+=s*n.year,delete n.year),n.month!==void 0&&(o+=s*n.month,delete n.month),e.setDate(1),e.setMonth(2),e.setFullYear(l),e.setMonth(o),e.setDate(Math.min(u,dt(e))),n.date!==void 0&&(e.setDate(e.getDate()+s*n.date),delete n.date),e}function un(e,n,s){const l=n.year!==void 0?n.year:e[`get${s}FullYear`](),o=n.month!==void 0?n.month-1:e[`get${s}Month`](),u=new Date(l,o+1,0).getDate(),g=Math.min(u,n.date!==void 0?n.date:e[`get${s}Date`]());return e[`set${s}Date`](1),e[`set${s}Month`](2),e[`set${s}FullYear`](l),e[`set${s}Month`](o),e[`set${s}Date`](g),delete n.year,delete n.month,delete n.date,e}function st(e,n,s){const l=Wt(n),o=new Date(e),u=l.year!==void 0||l.month!==void 0||l.date!==void 0?rn(o,l,s):o;for(const g in l){const i=La(g);u[`set${i}`](u[`get${i}`]()+s*l[g])}return u}function Wt(e){const n={...e};return e.years!==void 0&&(n.year=e.years,delete n.years),e.months!==void 0&&(n.month=e.months,delete n.months),e.days!==void 0&&(n.date=e.days,delete n.days),e.day!==void 0&&(n.date=e.day,delete n.day),e.hour!==void 0&&(n.hours=e.hour,delete n.hour),e.minute!==void 0&&(n.minutes=e.minute,delete n.minute),e.second!==void 0&&(n.seconds=e.second,delete n.second),e.millisecond!==void 0&&(n.milliseconds=e.millisecond,delete n.millisecond),n}function Xt(e,n,s){const l=Wt(n),o=s===!0?"UTC":"",u=new Date(e),g=l.year!==void 0||l.month!==void 0||l.date!==void 0?un(u,l,o):u;for(const i in l){const d=i.charAt(0).toUpperCase()+i.slice(1);g[`set${o}${d}`](l[i])}return g}function sn(e,n,s){const l=Gt(e,n,s),o=new Date(l.year,l.month===null?null:l.month-1,l.day===null?1:l.day,l.hour,l.minute,l.second,l.millisecond),u=o.getTimezoneOffset();return l.timezoneOffset===null||l.timezoneOffset===u?o:st(o,{minutes:l.timezoneOffset-u},1)}function Gt(e,n,s,l,o){const u={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(o!==void 0&&Object.assign(u,o),e==null||e===""||typeof e!="string")return u;n===void 0&&(n=Zt);const g=Jt(s,Qt.props),i=g.months,d=g.monthsShort,{regex:q,map:v}=on(n,g),M=e.match(q);if(M===null)return u;let F="";if(v.X!==void 0||v.x!==void 0){const j=parseInt(M[v.X!==void 0?v.X:v.x],10);if(isNaN(j)===!0||j<0)return u;const A=new Date(j*(v.X!==void 0?1e3:1));u.year=A.getFullYear(),u.month=A.getMonth()+1,u.day=A.getDate(),u.hour=A.getHours(),u.minute=A.getMinutes(),u.second=A.getSeconds(),u.millisecond=A.getMilliseconds()}else{if(v.YYYY!==void 0)u.year=parseInt(M[v.YYYY],10);else if(v.YY!==void 0){const j=parseInt(M[v.YY],10);u.year=j<0?j:2e3+j}if(v.M!==void 0){if(u.month=parseInt(M[v.M],10),u.month<1||u.month>12)return u}else v.MMM!==void 0?u.month=d.indexOf(M[v.MMM])+1:v.MMMM!==void 0&&(u.month=i.indexOf(M[v.MMMM])+1);if(v.D!==void 0){if(u.day=parseInt(M[v.D],10),u.year===null||u.month===null||u.day<1)return u;const j=l!=="persian"?new Date(u.year,u.month,0).getDate():Ee(u.year,u.month);if(u.day>j)return u}v.H!==void 0?u.hour=parseInt(M[v.H],10)%24:v.h!==void 0&&(u.hour=parseInt(M[v.h],10)%12,(v.A&&M[v.A]==="PM"||v.a&&M[v.a]==="pm"||v.aa&&M[v.aa]==="p.m.")&&(u.hour+=12),u.hour=u.hour%24),v.m!==void 0&&(u.minute=parseInt(M[v.m],10)%60),v.s!==void 0&&(u.second=parseInt(M[v.s],10)%60),v.S!==void 0&&(u.millisecond=parseInt(M[v.S],10)*10**(3-M[v.S].length)),(v.Z!==void 0||v.ZZ!==void 0)&&(F=v.Z!==void 0?M[v.Z].replace(":",""):M[v.ZZ],u.timezoneOffset=(F[0]==="+"?-1:1)*(60*F.slice(1,3)+1*F.slice(3,5)))}return u.dateHash=T(u.year,6)+"/"+T(u.month)+"/"+T(u.day),u.timeHash=T(u.hour)+":"+T(u.minute)+":"+T(u.second)+F,u}function dn(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function cn(e,n){return Xt(new Date,e,n)}function vn(e){const n=new Date(e).getDay();return n===0?7:n}function Ne(e){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);const s=new Date(n.getFullYear(),0,4);s.setDate(s.getDate()-(s.getDay()+6)%7+3);const l=n.getTimezoneOffset()-s.getTimezoneOffset();n.setHours(n.getHours()-l);const o=(n-s)/(Rt*7);return 1+Math.floor(o)}function fn(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function at(e,n){const s=new Date(e);return n===!0?fn(s):s.getTime()}function mn(e,n,s,l={}){const o=at(n,l.onlyDate),u=at(s,l.onlyDate),g=at(e,l.onlyDate);return(g>o||l.inclusiveFrom===!0&&g===o)&&(g<u||l.inclusiveTo===!0&&g===u)}function gn(e,n){return st(e,n,1)}function hn(e,n){return st(e,n,-1)}function G(e,n,s){const l=new Date(e),o=`set${s===!0?"UTC":""}`;switch(n){case"year":case"years":l[`${o}Month`](0);case"month":case"months":l[`${o}Date`](1);case"day":case"days":case"date":l[`${o}Hours`](0);case"hour":case"hours":l[`${o}Minutes`](0);case"minute":case"minutes":l[`${o}Seconds`](0);case"second":case"seconds":l[`${o}Milliseconds`](0)}return l}function yn(e,n,s){const l=new Date(e),o=`set${s===!0?"UTC":""}`;switch(n){case"year":case"years":l[`${o}Month`](11);case"month":case"months":l[`${o}Date`](dt(l));case"day":case"days":case"date":l[`${o}Hours`](23);case"hour":case"hours":l[`${o}Minutes`](59);case"minute":case"minutes":l[`${o}Seconds`](59);case"second":case"seconds":l[`${o}Milliseconds`](999)}return l}function Dn(e){let n=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(s=>{n=Math.max(n,new Date(s))}),n}function bn(e){let n=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(s=>{n=Math.min(n,new Date(s))}),n}function Ae(e,n,s){return(e.getTime()-e.getTimezoneOffset()*ot-(n.getTime()-n.getTimezoneOffset()*ot))/s}function it(e,n,s="days"){const l=new Date(e),o=new Date(n);switch(s){case"years":case"year":return l.getFullYear()-o.getFullYear();case"months":case"month":return(l.getFullYear()-o.getFullYear())*12+l.getMonth()-o.getMonth();case"days":case"day":case"date":return Ae(G(l,"day"),G(o,"day"),Rt);case"hours":case"hour":return Ae(G(l,"hour"),G(o,"hour"),an);case"minutes":case"minute":return Ae(G(l,"minute"),G(o,"minute"),ot);case"seconds":case"second":return Ae(G(l,"second"),G(o,"second"),1e3)}}function Qe(e){return it(e,G(e,"year"),"days")+1}function Mn(e){return Bt(e)===!0?"date":typeof e=="number"?"number":"string"}function wn(e,n,s){const l=new Date(e);if(n){const o=new Date(n);if(l<o)return o}if(s){const o=new Date(s);if(l>o)return o}return l}function xn(e,n,s){const l=new Date(e),o=new Date(n);if(s===void 0)return l.getTime()===o.getTime();switch(s){case"second":case"seconds":if(l.getSeconds()!==o.getSeconds())return!1;case"minute":case"minutes":if(l.getMinutes()!==o.getMinutes())return!1;case"hour":case"hours":if(l.getHours()!==o.getHours())return!1;case"day":case"days":case"date":if(l.getDate()!==o.getDate())return!1;case"month":case"months":if(l.getMonth()!==o.getMonth())return!1;case"year":case"years":if(l.getFullYear()!==o.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${s}`)}return!0}function dt(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function Me(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ht={YY(e,n,s){const l=this.YYYY(e,n,s)%100;return l>=0?T(l):"-"+T(Math.abs(l))},YYYY(e,n,s){return s??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return Me(e.getMonth()+1)},MM(e){return T(e.getMonth()+1)},MMM(e,n){return n.monthsShort[e.getMonth()]},MMMM(e,n){return n.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Me(this.Q(e))},D(e){return e.getDate()},Do(e){return Me(e.getDate())},DD(e){return T(e.getDate())},DDD(e){return Qe(e)},DDDo(e){return Me(Qe(e))},DDDD(e){return T(Qe(e),3)},d(e){return e.getDay()},do(e){return Me(e.getDay())},dd(e,n){return n.days[e.getDay()].slice(0,2)},ddd(e,n){return n.daysShort[e.getDay()]},dddd(e,n){return n.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Ne(e)},wo(e){return Me(Ne(e))},ww(e){return T(Ne(e))},H(e){return e.getHours()},HH(e){return T(e.getHours())},h(e){const n=e.getHours();return n===0?12:n>12?n%12:n},hh(e){return T(this.h(e))},m(e){return e.getMinutes()},mm(e){return T(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return T(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return T(Math.floor(e.getMilliseconds()/10))},SSS(e){return T(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,n,s,l){const o=l??e.getTimezoneOffset();return Vt(o,":")},ZZ(e,n,s,l){const o=l??e.getTimezoneOffset();return Vt(o)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Kt(e,n,s,l,o){if(e!==0&&!e||e===1/0||e===-1/0)return;const u=new Date(e);if(isNaN(u))return;n===void 0&&(n=Zt);const g=Jt(s,Qt.props);return n.replace(nn,(i,d)=>i in Ht?Ht[i](u,g,l,o):d===void 0?i:d.split("\\]").join("]"))}function pn(e){return Bt(e)===!0?new Date(e.getTime()):e}const Ot={isValid:dn,extractDate:sn,buildDate:cn,getDayOfWeek:vn,getWeekOfYear:Ne,isBetweenDates:mn,addToDate:gn,subtractFromDate:hn,adjustDate:Xt,startOfDate:G,endOfDate:yn,getMaxDate:Dn,getMinDate:bn,getDateDiff:it,getDayOfYear:Qe,inferDateFormat:Mn,getDateBetween:wn,isSameDate:xn,daysInMonth:dt,formatDate:Kt,clone:pn},te=20,Sn=["Calendar","Years","Months"],$t=e=>Sn.includes(e),nt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),we=" — ";function se(e){return e.year+"/"+T(e.month)}const _n=Be({name:"QDate",props:{...It,...Ya,...Ft,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...It.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:nt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:nt},navigationMaxYearMonth:{type:String,validator:nt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:$t}},emits:[...en,"rangeStart","rangeEnd","navigation"],setup(e,{slots:n,emit:s}){const{proxy:l}=rt(),{$q:o}=l,u=Lt(e,o),{getCache:g}=Aa(),{tabindex:i,headerClass:d,getLocale:q,getCurrentDate:v}=tn(e,o);let M;const F=ka(e),j=qa(F),A=$(null),y=$(yt()),Y=$(q()),R=x(()=>yt()),U=x(()=>q()),Z=x(()=>v()),w=$(Dt(y.value,Y.value)),E=$(e.defaultView),me=x(()=>o.lang.rtl===!0?"right":"left"),ne=$(me.value),le=$(me.value),de=w.value.year,C=$(de-de%te-(de<0?te:0)),f=$(null),D=x(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(u.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),I=x(()=>e.color||"primary"),B=x(()=>e.textColor||"white"),ge=x(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Se=x(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),p=x(()=>Se.value.filter(t=>typeof t=="string").map(t=>Re(t,y.value,Y.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),Q=x(()=>{const t=a=>Re(a,y.value,Y.value);return Se.value.filter(a=>Ca(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),K=x(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Tt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),_e=x(()=>e.calendar==="persian"?ue:(t,a,r)=>Kt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?y.value:a,r===void 0?Y.value:r,t.year,t.timezoneOffset)),Ye=x(()=>p.value.length+Q.value.reduce((t,a)=>t+1+it(K.value(a.to),K.value(a.from)),0)),ct=x(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(f.value!==null){const r=f.value.init,c=K.value(r);return Y.value.daysShort[c.getDay()]+", "+Y.value.monthsShort[r.month-1]+" "+r.day+we+"?"}if(Ye.value===0)return we;if(Ye.value>1)return`${Ye.value} ${Y.value.pluralDay}`;const t=p.value[0],a=K.value(t);return isNaN(a.valueOf())===!0?we:Y.value.headerTitle!==void 0?Y.value.headerTitle(a,t):Y.value.daysShort[a.getDay()]+", "+Y.value.monthsShort[t.month-1]+" "+t.day}),ea=x(()=>p.value.concat(Q.value.map(a=>a.from)).sort((a,r)=>a.year-r.year||a.month-r.month)[0]),ta=x(()=>p.value.concat(Q.value.map(a=>a.to)).sort((a,r)=>r.year-a.year||r.month-a.month)[0]),vt=x(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(Ye.value===0)return we;if(Ye.value>1){const t=ea.value,a=ta.value,r=Y.value.monthsShort;return r[t.month-1]+(t.year!==a.year?" "+t.year+we+r[a.month-1]+" ":t.month!==a.month?we+r[a.month-1]:"")+" "+a.year}return p.value[0].year}),He=x(()=>{const t=[o.iconSet.datetime.arrowLeft,o.iconSet.datetime.arrowRight];return o.lang.rtl===!0?t.reverse():t}),ft=x(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):Y.value.firstDayOfWeek),aa=x(()=>{const t=Y.value.daysShort,a=ft.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),oe=x(()=>{const t=w.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ee(t.year,t.month)}),na=x(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),z=x(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),P=x(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),ze=x(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return z.value!==null&&z.value.year>=w.value.year&&(t.year.prev=!1,z.value.year===w.value.year&&z.value.month>=w.value.month&&(t.month.prev=!1)),P.value!==null&&P.value.year<=w.value.year&&(t.year.next=!1,P.value.year===w.value.year&&P.value.month<=w.value.month&&(t.month.next=!1)),t}),Oe=x(()=>{const t={};return p.value.forEach(a=>{const r=se(a);t[r]===void 0&&(t[r]=[]),t[r].push(a.day)}),t}),mt=x(()=>{const t={};return Q.value.forEach(a=>{const r=se(a.from),c=se(a.to);if(t[r]===void 0&&(t[r]=[]),t[r].push({from:a.from.day,to:r===c?a.to.day:void 0,range:a}),r<c){let m;const{year:k,month:b}=a.from,_=b<12?{year:k,month:b+1}:{year:k+1,month:1};for(;(m=se(_))<=c;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===c?a.to.day:void 0,range:a}),_.month++,_.month>12&&(_.year++,_.month=1)}}),t}),ke=x(()=>{if(f.value===null)return;const{init:t,initHash:a,final:r,finalHash:c}=f.value,[m,k]=a<=c?[t,r]:[r,t],b=se(m),_=se(k);if(b!==W.value&&_!==W.value)return;const H={};return b===W.value?(H.from=m.day,H.includeFrom=!0):H.from=1,_===W.value?(H.to=k.day,H.includeTo=!0):H.to=oe.value,H}),W=x(()=>se(w.value)),la=x(()=>{const t={};if(e.options===void 0){for(let r=1;r<=oe.value;r++)t[r]=!0;return t}const a=typeof e.options=="function"?e.options:r=>e.options.includes(r);for(let r=1;r<=oe.value;r++){const c=W.value+"/"+T(r);t[r]=a(c)}return t}),oa=x(()=>{const t={};if(e.events===void 0)for(let a=1;a<=oe.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:r=>e.events.includes(r);for(let r=1;r<=oe.value;r++){const c=W.value+"/"+T(r);t[r]=a(c)===!0&&na.value(c)}}return t}),ra=x(()=>{let t,a;const{year:r,month:c}=w.value;if(e.calendar!=="persian")t=new Date(r,c-1,1),a=new Date(r,c-1,0).getDate();else{const m=Tt(r,c,1);t=new Date(m.gy,m.gm-1,m.gd);let k=c-1,b=r;k===0&&(k=12,b--),a=Ee(b,k)}return{days:t.getDay()-ft.value-1,endDay:a}}),gt=x(()=>{const t=[],{days:a,endDay:r}=ra.value,c=a<0?a+7:a;if(c<6)for(let b=r-c;b<=r;b++)t.push({i:b,fill:!0});const m=t.length;for(let b=1;b<=oe.value;b++){const _={i:b,event:oa.value[b],classes:[]};la.value[b]===!0&&(_.in=!0,_.flat=!0),t.push(_)}if(Oe.value[W.value]!==void 0&&Oe.value[W.value].forEach(b=>{const _=m+b-1;Object.assign(t[_],{selected:!0,unelevated:!0,flat:!1,color:I.value,textColor:B.value})}),mt.value[W.value]!==void 0&&mt.value[W.value].forEach(b=>{if(b.from!==void 0){const _=m+b.from-1,H=m+(b.to||oe.value)-1;for(let Ce=_;Ce<=H;Ce++)Object.assign(t[Ce],{range:b.range,unelevated:!0,color:I.value,textColor:B.value});Object.assign(t[_],{rangeFrom:!0,flat:!1}),b.to!==void 0&&Object.assign(t[H],{rangeTo:!0,flat:!1})}else if(b.to!==void 0){const _=m+b.to-1;for(let H=m;H<=_;H++)Object.assign(t[H],{range:b.range,unelevated:!0,color:I.value,textColor:B.value});Object.assign(t[_],{flat:!1,rangeTo:!0})}else{const _=m+oe.value-1;for(let H=m;H<=_;H++)Object.assign(t[H],{range:b.range,unelevated:!0,color:I.value,textColor:B.value})}}),ke.value!==void 0){const b=m+ke.value.from-1,_=m+ke.value.to-1;for(let H=b;H<=_;H++)t[H].color=I.value,t[H].editRange=!0;ke.value.includeFrom===!0&&(t[b].editRangeFrom=!0),ke.value.includeTo===!0&&(t[_].editRangeTo=!0)}w.value.year===Z.value.year&&w.value.month===Z.value.month&&(t[m+Z.value.day-1].today=!0);const k=t.length%7;if(k>0){const b=7-k;for(let _=1;_<=b;_++)t.push({i:_,fill:!0})}return t.forEach(b=>{let _="q-date__calendar-item ";b.fill===!0?_+="q-date__calendar-item--fill":(_+=`q-date__calendar-item--${b.in===!0?"in":"out"}`,b.range!==void 0&&(_+=` q-date__range${b.rangeTo===!0?"-to":b.rangeFrom===!0?"-from":""}`),b.editRange===!0&&(_+=` q-date__edit-range${b.editRangeFrom===!0?"-from":""}${b.editRangeTo===!0?"-to":""}`),(b.range!==void 0||b.editRange===!0)&&(_+=` text-${b.color}`)),b.classes=_}),t}),ua=x(()=>e.disable===!0?{"aria-disabled":"true"}:{});ae(()=>e.modelValue,t=>{if(M===JSON.stringify(t))M=0;else{const a=Dt(y.value,Y.value);he(a.year,a.month,a)}}),ae(E,()=>{A.value!==null&&l.$el.contains(document.activeElement)===!0&&A.value.focus()}),ae(()=>w.value.year+"|"+w.value.month,()=>{s("navigation",{year:w.value.year,month:w.value.month})}),ae(R,t=>{pt(t,Y.value,"mask"),y.value=t}),ae(U,t=>{pt(y.value,t,"locale"),Y.value=t});function Pe(t){M=JSON.stringify(t)}function ht(){const{year:t,month:a,day:r}=Z.value,c={...w.value,year:t,month:a,day:r},m=Oe.value[se(c)];(m===void 0||m.includes(c.day)===!1)&&Je(c),Ue(c.year,c.month)}function sa(t){$t(t)===!0&&(E.value=t)}function ia(t,a){["month","year"].includes(t)&&(t==="month"?Mt:Ze)(a===!0?-1:1)}function Ue(t,a){E.value="Calendar",he(t,a)}function da(t,a){if(e.range===!1||!t){f.value=null;return}const r=Object.assign({...w.value},t),c=a!==void 0?Object.assign({...w.value},a):r;f.value={init:r,initHash:ue(r),final:c,finalHash:ue(c)},Ue(r.year,r.month)}function yt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Re(t,a,r){return Gt(t,a,r,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Dt(t,a){const r=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(r.length===0)return bt();const c=r[r.length-1],m=Re(c.from!==void 0?c.from:c,t,a);return m.dateHash===null?bt():m}function bt(){let t,a;if(e.defaultYearMonth!==void 0){const r=e.defaultYearMonth.split("/");t=parseInt(r[0],10),a=parseInt(r[1],10)}else{const r=Z.value!==void 0?Z.value:v();t=r.year,a=r.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+T(a)+"/01"}}function Mt(t){let a=w.value.year,r=Number(w.value.month)+t;r===13?(r=1,a++):r===0&&(r=12,a--),he(a,r),ge.value===!0&&$e("month")}function Ze(t){const a=Number(w.value.year)+t;he(a,w.value.month),ge.value===!0&&$e("year")}function ca(t){he(t,w.value.month),E.value=e.defaultView==="Years"?"Months":"Calendar",ge.value===!0&&$e("year")}function va(t){he(w.value.year,t),E.value="Calendar",ge.value===!0&&$e("month")}function fa(t,a){(Oe.value[a]?.includes(t.day)===!0?We:Je)(t)}function ce(t){return{year:t.year,month:t.month,day:t.day}}function he(t,a,r){if(z.value!==null&&t<=z.value.year&&((a<z.value.month||t<z.value.year)&&(a=z.value.month),t=z.value.year),P.value!==null&&t>=P.value.year&&((a>P.value.month||t>P.value.year)&&(a=P.value.month),t=P.value.year),r!==void 0){const{hour:m,minute:k,second:b,millisecond:_,timezoneOffset:H,timeHash:Ce}=r;Object.assign(w.value,{hour:m,minute:k,second:b,millisecond:_,timezoneOffset:H,timeHash:Ce})}const c=t+"/"+T(a)+"/01";c!==w.value.dateHash&&(ne.value=w.value.dateHash<c==(o.lang.rtl!==!0)?"left":"right",t!==w.value.year&&(le.value=ne.value),_t(()=>{C.value=t-t%te-(t<0?te:0),Object.assign(w.value,{year:t,month:a,day:1,dateHash:c})}))}function wt(t,a,r){const c=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:m,details:k}=xt(a,r);Pe(c),s("update:modelValue",c,m,k)}function $e(t){const a=p.value[0]!==void 0&&p.value[0].dateHash!==null?{...p.value[0]}:{...w.value};_t(()=>{a.year=w.value.year,a.month=w.value.month;const r=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ee(a.year,a.month);a.day=Math.min(Math.max(1,a.day),r);const c=ye(a),{details:m}=xt("",a);Pe(c),s("update:modelValue",c,t,m)})}function xt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ce(a.target),from:ce(a.from),to:ce(a.to)}}:{reason:`${t}-day`,details:ce(a)}}function ye(t,a,r){return t.from!==void 0?{from:_e.value(t.from,a,r),to:_e.value(t.to,a,r)}:_e.value(t,a,r)}function Je(t){let a;if(e.multiple===!0)if(t.from!==void 0){const r=ue(t.from),c=ue(t.to),m=p.value.filter(b=>b.dateHash<r||b.dateHash>c),k=Q.value.filter(({from:b,to:_})=>_.dateHash<r||b.dateHash>c);a=m.concat(k).concat(t).map(b=>ye(b))}else{const r=Se.value.slice();r.push(ye(t)),a=r}else a=ye(t);wt(a,"add",t)}function We(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const r=ye(t);t.from!==void 0?a=e.modelValue.filter(c=>c.from!==void 0?c.from!==r.from&&c.to!==r.to:!0):a=e.modelValue.filter(c=>c!==r),a.length===0&&(a=null)}wt(a,"remove",t)}function pt(t,a,r){const c=p.value.concat(Q.value).map(k=>ye(k,t,a)).filter(k=>k.from!==void 0?k.from.dateHash!==null&&k.to.dateHash!==null:k.dateHash!==null),m=(e.multiple===!0?c:c[0])||null;Pe(m),s("update:modelValue",m,r)}function ma(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+d.value},[h("div",{class:"relative-position"},[h(xe,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+vt.value,class:"q-date__header-subtitle q-date__header-link "+(E.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...g("vY",{onClick(){E.value="Years"},onKeyup(t){t.keyCode===13&&(E.value="Years")}})},[vt.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(xe,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+ct.value,class:"q-date__header-title-label q-date__header-link "+(E.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...g("vC",{onClick(){E.value="Calendar"},onKeyup(t){t.keyCode===13&&(E.value="Calendar")}})},[ct.value]))]),e.todayBtn===!0?h(L,{class:"q-date__header-today self-start",icon:o.iconSet.datetime.today,ariaLabel:o.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:ht}):null])])}function Xe({label:t,type:a,key:r,dir:c,goTo:m,boundaries:k,cls:b}){return[h("div",{class:"row items-center q-date__arrow"},[h(L,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[0],ariaLabel:a==="Years"?o.lang.date.prevYear:o.lang.date.prevMonth,tabindex:i.value,disable:k.prev===!1,...g("go-#"+a,{onClick(){m(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+b},[h(xe,{name:"q-transition--jump-"+c},()=>h("div",{key:r},[h(L,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,...g("view#"+a,{onClick:()=>{E.value=a}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(L,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[1],ariaLabel:a==="Years"?o.lang.date.nextYear:o.lang.date.nextMonth,tabindex:i.value,disable:k.next===!1,...g("go+#"+a,{onClick(){m(1)}})})])]}const ga={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},Xe({label:Y.value.months[w.value.month-1],type:"Months",key:w.value.month,dir:ne.value,goTo:Mt,boundaries:ze.value.month,cls:" col"}).concat(Xe({label:w.value.year,type:"Years",key:w.value.year,dir:le.value,goTo:Ze,boundaries:ze.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},aa.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(xe,{name:"q-transition--slide-"+ne.value},()=>h("div",{key:W.value,class:"q-date__calendar-days fit"},gt.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(L,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,...g("day#"+t.i,{onClick:()=>{ha(t.i)},onMouseover:()=>{ya(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=w.value.year===Z.value.year,a=c=>z.value!==null&&w.value.year===z.value.year&&z.value.month>c||P.value!==null&&w.value.year===P.value.year&&P.value.month<c,r=Y.value.monthsShort.map((c,m)=>{const k=w.value.month===m+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(L,{class:t===!0&&Z.value.month===m+1?"q-date__today":null,flat:k!==!0,label:c,unelevated:k,color:k===!0?I.value:null,textColor:k===!0?B.value:null,tabindex:i.value,disable:a(m+1),...g("month#"+m,{onClick:()=>{va(m+1)}})})])});return e.yearsInMonthView===!0&&r.unshift(h("div",{class:"row no-wrap full-width"},[Xe({label:w.value.year,type:"Years",key:w.value.year,dir:le.value,goTo:Ze,boundaries:ze.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},r)},Years(){const t=C.value,a=t+te,r=[],c=m=>z.value!==null&&z.value.year>m||P.value!==null&&P.value.year<m;for(let m=t;m<=a;m++){const k=w.value.year===m;r.push(h("div",{class:"q-date__years-item flex flex-center"},[h(L,{key:"yr"+m,class:Z.value.year===m?"q-date__today":null,flat:!k,label:m,dense:!0,unelevated:k,color:k===!0?I.value:null,textColor:k===!0?B.value:null,tabindex:i.value,disable:c(m),...g("yr#"+m,{onClick:()=>{ca(m)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(L,{round:!0,dense:!0,flat:!0,icon:He.value[0],ariaLabel:o.lang.date.prevRangeYears(te),tabindex:i.value,disable:c(t),...g("y-",{onClick:()=>{C.value-=te}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},r),h("div",{class:"col-auto"},[h(L,{round:!0,dense:!0,flat:!0,icon:He.value[1],ariaLabel:o.lang.date.nextRangeYears(te),tabindex:i.value,disable:c(a),...g("y+",{onClick:()=>{C.value+=te}})})])])}};function ha(t){const a={...w.value,day:t};if(e.range===!1){fa(a,W.value);return}if(f.value===null){const r=gt.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&r.range!==void 0){We({target:a,from:r.range.from,to:r.range.to});return}if(r.selected===!0){We(a);return}const c=ue(a);f.value={init:a,initHash:c,final:a,finalHash:c},s("rangeStart",ce(a))}else{const r=f.value.initHash,c=ue(a),m=r<=c?{from:f.value.init,to:a}:{from:a,to:f.value.init};f.value=null,Je(r===c?a:{target:a,...m}),s("rangeEnd",{from:ce(m.from),to:ce(m.to)})}}function ya(t){if(f.value!==null){const a={...w.value,day:t};Object.assign(f.value,{final:a,finalHash:ue(a)})}}return Object.assign(l,{setToday:ht,setView:sa,offsetCalendar:ia,setCalendarTo:Ue,setEditingRange:da}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(xe,{name:"q-transition--fade"},ga[E.value])])],a=Nt(n.default);return a!==void 0&&t.push(h("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&j(t,"push"),h("div",{class:D.value,...ua.value},[ma(),h("div",{ref:A,class:"q-date__main col column",tabindex:-1},t)])}}}),Yn=Be({name:"QPopupProxy",props:{...Ea,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:n,emit:s,attrs:l}){const{proxy:o}=rt(),{$q:u}=o,g=$(!1),i=$(null),d=x(()=>parseInt(e.breakpoint,10)),{canShow:q}=Na({showing:g});function v(){return u.screen.width<d.value||u.screen.height<d.value?"dialog":"menu"}const M=$(v()),F=x(()=>M.value==="menu"?{maxHeight:"99vh"}:{});ae(()=>v(),y=>{g.value!==!0&&(M.value=y)});function j(y){g.value=!0,s("show",y)}function A(y){g.value=!1,M.value=v(),s("hide",y)}return Object.assign(o,{show(y){q(y)===!0&&i.value.show(y)},hide(y){i.value.hide(y)},toggle(y){i.value.toggle(y)}}),Ta(o,"currentComponent",()=>({type:M.value,ref:i.value})),()=>{const y={ref:i,...F.value,...l,onShow:j,onHide:A};let Y;return M.value==="dialog"?Y=lt:(Y=ja,Object.assign(y,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(Y,y,n.default)}}}),kn={class:"row items-center justify-between q-mb-md"},Cn={class:"text-h5 text-info flex items-center"},qn={class:"row q-gutter-sm"},Tn={class:"row q-gutter-sm"},In={key:0},Vn={key:0},Hn={key:1,class:"text-center q-pa-sm text-grey"},On={key:1,class:"text-center q-pa-lg text-grey"},$n={class:"text-h6 text-primary"},jn={class:"text-h6 text-secondary"},Fn={__name:"WorkTasksPage",setup(e){const n=Ba(),s=za(),l=$([]),o=$(["預設分類"]),u=$(!1),g=$(!1),i=$(null),d=$({title:"",description:"",urgent:!1,completed:!1,category:"預設分類",dueDate:null}),q=$(""),v=$(null),M=$(null),F=[{label:"未完成",value:!1},{label:"已完成",value:!0}],j=$("dueDate"),A=[{label:"截止日期",value:"dueDate"},{label:"標題",value:"title"},{label:"急件優先",value:"urgent"}];Va(()=>{const C=localStorage.getItem("workTasks");C&&(l.value=JSON.parse(C));const f=localStorage.getItem("workCategories");f&&(o.value=JSON.parse(f))});const y=()=>{localStorage.setItem("workTasks",JSON.stringify(l.value))},Y=()=>{o.value=o.value.filter(C=>C.trim()!==""),localStorage.setItem("workCategories",JSON.stringify(o.value)),g.value=!1},R=x(()=>v.value?[v.value]:o.value),U=C=>{const f=l.value.filter(D=>D.category===C&&(!q.value||D.title.includes(q.value)||D.description.includes(q.value))&&(M.value===null||D.completed===M.value));return Z(f)},Z=C=>j.value==="dueDate"?C.slice().sort((f,D)=>f.dueDate?D.dueDate?new Date(f.dueDate)-new Date(D.dueDate):-1:1):j.value==="title"?C.slice().sort((f,D)=>f.title.localeCompare(D.title)):j.value==="urgent"?C.slice().sort((f,D)=>D.urgent===f.urgent?0:D.urgent?1:-1):C,w=(C=null)=>{C?(i.value=C,d.value={...C}):(i.value=null,d.value={title:"",description:"",urgent:!1,completed:!1,category:o.value[0],dueDate:Ot.formatDate(new Date,"YYYY-MM-DD")}),u.value=!0},E=()=>{d.value.title.trim()&&(i.value?Object.assign(i.value,d.value):l.value.push({id:Et(),...d.value}),y(),u.value=!1)},me=C=>{const f=l.value.find(D=>D.id===C);s.dialog({title:"確認刪除",message:`確定要刪除任務「${f?.title||""}」嗎？`,cancel:!0,persistent:!0}).onOk(()=>{l.value=l.value.filter(D=>D.id!==C),y(),s.notify({type:"positive",message:"任務已刪除"})})},ne=C=>{const f=o.value[C];s.dialog({title:"確認刪除分類",message:`確定要刪除分類「${f}」嗎？
此分類的任務將移動到「預設分類」。`,cancel:!0,persistent:!0}).onOk(()=>{l.value.forEach(D=>{D.category===f&&(D.category="預設分類")}),o.value.splice(C,1),Y(),s.notify({type:"warning",message:`分類「${f}」已刪除，相關任務移至預設分類`})})},le=C=>C?Ot.formatDate(C,"YYYY/MM/DD"):"未設定",de=C=>!C.dueDate||C.completed?!1:new Date(C.dueDate)<new Date;return(C,f)=>(N(),ee(Qa,{class:"q-pa-md"},{default:V(()=>[ve("div",kn,[ve("div",Cn,[S(X,{name:"assignment",size:"md",class:"q-mr-sm text-info"}),f[15]||(f[15]=De(" 工作代辦事項 "))]),ve("div",qn,[qe(n).mode==="admin"?(N(),ee(L,{key:0,unelevated:"",icon:"add",label:"新增任務",color:"primary",onClick:f[0]||(f[0]=D=>w())})):be("",!0),qe(n).mode==="admin"?(N(),ee(L,{key:1,unelevated:"",icon:"category",label:"分類管理",color:"secondary",onClick:f[1]||(f[1]=D=>g.value=!0)})):be("",!0)])]),S(Ge,{flat:"",bordered:"",class:"q-mb-md shadow-2 rounded-borders"},{default:V(()=>[S(Te,null,{default:V(()=>[ve("div",Tn,[S(Ie,{filled:"",dense:"",modelValue:q.value,"onUpdate:modelValue":f[2]||(f[2]=D=>q.value=D),placeholder:"搜尋任務...",debounce:"300",clearable:"",class:"col"},{append:V(()=>[S(X,{name:"search"})]),_:1},8,["modelValue"]),S(Fe,{filled:"",dense:"",modelValue:v.value,"onUpdate:modelValue":f[3]||(f[3]=D=>v.value=D),options:o.value.map(D=>({label:D,value:D})),"option-value":"value","option-label":"label","emit-value":"","map-options":"",placeholder:"分類",clearable:"",class:"col-2"},null,8,["modelValue","options"]),S(Fe,{filled:"",dense:"",modelValue:M.value,"onUpdate:modelValue":f[4]||(f[4]=D=>M.value=D),options:F,"option-value":"value","option-label":"label","emit-value":"","map-options":"",placeholder:"狀態",clearable:"",class:"col-2"},null,8,["modelValue"]),S(Fe,{filled:"",dense:"",modelValue:j.value,"onUpdate:modelValue":f[5]||(f[5]=D=>j.value=D),options:A,"option-value":"value","option-label":"label","emit-value":"","map-options":"",placeholder:"排序",class:"col-2"},null,8,["modelValue"])])]),_:1})]),_:1}),l.value.length>0?(N(),re("div",In,[S(Fa,{bordered:"",separator:"",class:"rounded-borders shadow-2"},{default:V(()=>[(N(!0),re(Ke,null,et(R.value,D=>(N(),ee(Ra,{key:D,label:D,icon:"folder","expand-icon":"expand_more","header-class":"bg-info text-white",style:{"font-size":"20px"}},{default:V(()=>[U(D).length>0?(N(),re("div",Vn,[(N(!0),re(Ke,null,et(U(D),I=>Le((N(),ee(zt,{key:I.id,class:"q-pa-sm task-item",clickable:""},{default:V(()=>[S(pe,{side:""},{default:V(()=>[qe(n).mode==="admin"?(N(),ee(Ha,{key:0,modelValue:I.completed,"onUpdate:modelValue":[B=>I.completed=B,y],color:"primary"},null,8,["modelValue","onUpdate:modelValue"])):be("",!0)]),_:2},1024),S(pe,null,{default:V(()=>[S(Ve,{class:Yt(I.completed?"text-strike text-grey-6":"text-body1")},{default:V(()=>[I.urgent?(N(),ee(X,{key:0,name:"priority_high",color:"negative",size:"sm",class:"q-mr-xs"})):be("",!0),De(" "+je(I.title),1)]),_:2},1032,["class"]),S(Ve,{caption:"",class:"text-grey-7"},{default:V(()=>[De(je(I.description),1)]),_:2},1024),S(Ve,{caption:""},{default:V(()=>[S(X,{name:"event",size:"sm",class:"q-mr-xs text-primary"}),ve("span",{class:Yt(de(I)?"text-negative":"")},je(le(I.dueDate)),3)]),_:2},1024)]),_:2},1024),S(pe,{side:""},{default:V(()=>[qe(n).mode==="admin"?(N(),ee(L,{key:0,dense:"",flat:"",round:"",icon:"edit",color:"primary",onClick:kt(B=>w(I),["stop"])},null,8,["onClick"])):be("",!0),qe(n).mode==="admin"?(N(),ee(L,{key:1,dense:"",flat:"",round:"",icon:"delete",color:"negative",onClick:kt(B=>me(I.id),["stop"])},null,8,["onClick"])):be("",!0)]),_:2},1024)]),_:2},1024)),[[Oa]])),128))])):(N(),re("div",Hn,"無任務"))]),_:2},1032,["label"]))),128))]),_:1})])):(N(),re("div",On,[S(X,{name:"inbox",size:"lg",class:"q-mb-sm"}),f[16]||(f[16]=De(" 尚未新增任何任務 "))])),S(lt,{modelValue:u.value,"onUpdate:modelValue":f[12]||(f[12]=D=>u.value=D)},{default:V(()=>[S(Ge,{style:{"min-width":"400px"},class:"rounded-borders shadow-4"},{default:V(()=>[S(Te,null,{default:V(()=>[ve("div",$n,[S(X,{name:"edit_note",class:"q-mr-sm"}),De(" "+je(i.value?"編輯任務":"新增任務"),1)])]),_:1}),S(Te,null,{default:V(()=>[S(Ie,{modelValue:d.value.title,"onUpdate:modelValue":f[6]||(f[6]=D=>d.value.title=D),label:"標題",filled:"",dense:"",autofocus:""},null,8,["modelValue"]),S(Ie,{modelValue:d.value.description,"onUpdate:modelValue":f[7]||(f[7]=D=>d.value.description=D),label:"描述",type:"textarea",filled:"",dense:"",class:"q-mt-sm"},null,8,["modelValue"]),S(Fe,{modelValue:d.value.category,"onUpdate:modelValue":f[8]||(f[8]=D=>d.value.category=D),options:o.value,label:"分類",filled:"",dense:"",class:"q-mt-sm"},null,8,["modelValue","options"]),S(Ie,{filled:"",dense:"",modelValue:d.value.dueDate,"onUpdate:modelValue":f[10]||(f[10]=D=>d.value.dueDate=D),label:"截止日期",mask:"####-##-##",class:"q-mt-sm"},{append:V(()=>[S(X,{name:"event",class:"cursor-pointer"},{default:V(()=>[S(Yn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:V(()=>[S(_n,{modelValue:d.value.dueDate,"onUpdate:modelValue":f[9]||(f[9]=D=>d.value.dueDate=D),mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),S($a,{modelValue:d.value.urgent,"onUpdate:modelValue":f[11]||(f[11]=D=>d.value.urgent=D),label:"急件",color:"negative",class:"q-mt-sm"},null,8,["modelValue"])]),_:1}),S(Ct,{align:"right"},{default:V(()=>[Le(S(L,{flat:"",label:"取消",color:"grey"},null,512),[[qt]]),S(L,{unelevated:"",label:"儲存",color:"primary",onClick:E})]),_:1})]),_:1})]),_:1},8,["modelValue"]),S(lt,{modelValue:g.value,"onUpdate:modelValue":f[14]||(f[14]=D=>g.value=D)},{default:V(()=>[S(Ge,{style:{"min-width":"350px"},class:"rounded-borders shadow-4"},{default:V(()=>[S(Te,null,{default:V(()=>[ve("div",jn,[S(X,{name:"category",class:"q-mr-sm"}),f[17]||(f[17]=De(" 分類管理 "))])]),_:1}),S(Te,null,{default:V(()=>[(N(!0),re(Ke,null,et(o.value,(D,I)=>(N(),re("div",{key:I,class:"row items-center q-mb-sm"},[S(Ie,{dense:"",filled:"",modelValue:o.value[I],"onUpdate:modelValue":B=>o.value[I]=B,class:"col"},null,8,["modelValue","onUpdate:modelValue"]),S(L,{dense:"",flat:"",round:"",icon:"delete",color:"negative",onClick:B=>ne(I)},null,8,["onClick"])]))),128)),S(L,{dense:"",unelevated:"",icon:"add",label:"新增分類",color:"secondary",class:"q-mt-sm",onClick:f[13]||(f[13]=D=>o.value.push("新分類"))})]),_:1}),S(Ct,{align:"right"},{default:V(()=>[Le(S(L,{flat:"",label:"關閉",color:"grey"},null,512),[[qt]]),S(L,{unelevated:"",label:"儲存",color:"secondary",onClick:Y})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Wn=Ia(Fn,[["__scopeId","data-v-c706f6c3"]]);export{Wn as default};
